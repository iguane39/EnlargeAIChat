try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f6bc027d-0251-4756-9d9f-b5f2dacee7fd",e._sentryDebugIdIdentifier="sentry-dbid-f6bc027d-0251-4756-9d9f-b5f2dacee7fd")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4748],{2403:(e,t,s)=>{s.d(t,{B:()=>l});var l=function(e){return e.CONSOLE="la-console",e.SETTINGS_MANAGER="settings-manager",e.LE_CHAT_WEB="le-chat-web",e}({})},4791:(e,t,s)=>{s(13797),s(35567)},8866:(e,t,s)=>{s.d(t,{f:()=>n,n:()=>i});var l=s(8380),a=s(8672),r=s(35111);let n={AUDIO_CANCEL_RECORDING:"audio.cancel_recording",AUDIO_ERROR:"audio.error",AUDIO_SEND_RECORDING:"audio.send_recording",AUDIO_START_RECORDING:"audio.start_recording",CANVA_CLOSE_BUTTON:"canva.close_button",CANVA_COPY_BUTTON:"canva.copy_button",CANVA_EXPORT:"canva.export",CANVA_EXPORT_BUTTON:"canva.export_button",CANVA_NEXT_VERSION:"canva.next_version",CANVA_PREVIEW_PANEL_BUTTON:"canva.preview_panel_button",CANVA_PREVIOUS_VERSION:"canva.previous_version",CANVA_REFERENCE_OPENED:"canva.reference_opened",CANVA_RENDER_PREVIEW:"canva.render_preview",CANVA_SHARE_BUTTON:"canva.share_button",CHANGED_MESSAGE_VERSION:"changed_message_version",CHAT_COMPLETION_ERROR:"chat_completion_error",CMDK_OPEN:"cmdk_open",CMDK_VISIT_PAGE:"cmdk_visit_page",COPIED_MESSAGE:"copied_message",COPIED_MESSAGE_CODE_BLOCK:"copied_message_code_block",COPY_IMAGE_BUTTON:"copy_image_button",COPY_TABLE_SUCESS:"message.copy_table.success",COPY_TABLE_ERROR:"message.copy_table.error",COPY_USER_SELECTION:"message.copy_user_selection",MESSAGE_USER_SELECTION:"message.user_selection",DISMISSED_ANSWER_PREFERENCE_PROMPT:"dismissed_answer_preference_prompt",DISMISSED_ANSWER_REACTION_DETAIL:"dismissed_answer_reaction_detail",DOWNLOAD_IMAGE_BUTTON:"download_image_button",EDITED_PROMPT:"edited_prompt",FEATURE_TOGGLED:"feature_toggled",FOLLOWUP_CLICKED:"followup.clicked",FOLLOWUP_HOVERED:"followup.hovered",INDEXING_CONNECT_WORKFLOW:"indexing.connect_workflow.started",INTEGRATIONS_CONNECT:"integrations.connect",INTEGRATIONS_RECONNECT:"integrations.reconnect",MEMORY_CREATED:"memory.created",MEMORY_DELETED:"memory.deleted",MEMORY_IMPORTED:"memory.imported",MEMORY_OPT_IN:"memory.opt_in",MEMORY_OPT_OUT:"memory.opt_out",MEMORY_SEARCHED:"memory.searched",MEMORY_TOGGLED:"memory.toggled",MEMORY_UPDATED:"memory.updated",MEMORY_UPDATED_IN_CHAT_TOOLTIP:"memory.updated_in_chat_tooltip",MESSAGE_INPUT_DOCUMENT_LIBRARY_SEARCH:"message_input.document_library.search",MESSAGE_INPUT_DOCUMENT_LIBRARY_SELECTION:"message_input.document_library.selection",MESSAGE_INPUT_DOCUMENT_UPLOAD_FROM_LIBRARY:"message_input.document_upload_from_library",MESSAGE_INPUT_FEATURES_DESELECTION:"message_input.features.deselection",MESSAGE_INPUT_FEATURES_SELECTION:"message_input.features.selection",MESSAGE_INPUT_INTEGRATIONS_DESELECTION:"message_input.integrations.deselection",MESSAGE_INPUT_INTEGRATIONS_SELECTION:"message_input.integrations.selection",MESSAGE_INPUT_RICH_INPUT_ERROR:"message_input.rich_input.error",PAGE_VIEW:"page_view",PROJECT_CHAT_OPEN:"project.chat_open",PROJECT_LIBRARY_CREATED:"project.library.created",PROMPT_SUBMITTED:"prompt_submitted",REFERENCE_CLICKED:"reference.clicked",REFERENCE_HOVERED:"reference.hovered",RETRIED_ANSWER:"retried_answer",REWROTE_ANSWER:"rewrote_answer",SEARCH_MODAL_CLOSED:"search_modal_closed",SELECT_PLAN_CTA_CLICKED:"select_plan_cta_clicked",SHARED_CHAT:"shared_chat",STARTING_EDIT_AFTER_ERROR:"starting_edit_after_error",SUGGESTION_PROMPT_SUBMITTED:"suggestion.prompt_submitted",SUGGESTION_INTEGRATION_CONNECTED:"suggestion.integration_connected",UPGRADE_CTA_CLICKED:"upgrade_cta_clicked"},i=()=>{let{mutate:e}=r.api.event.sendEventToDatalake.useMutation(),{mutate:t}=r.api.event.sendMessageEventToDatalake.useMutation(),s=(0,l.useCallback)((t,s)=>{e({name:t,properties:null!=s?s:{}})},[e]),n=(0,l.useCallback)((e,l)=>{let{chat_id:r,message_id:n,message_version:i,...o}=l;(0,a.u)(r)||(0,a.u)(n)||(0,a.u)(i)?s(e,o):t({name:e,chatId:r,messageId:n,messageVersion:i,properties:o})},[s,t]);return{track:s,trackMessageEvent:n}}},13797:(e,t,s)=>{s.d(t,{xQ:()=>a}),s(39),s(4791);var l=s(30817);let a=e=>{let{userRole:t}=e;return t!==l.gG.MEMBER}},24783:(e,t,s)=>{s.r(t),s.d(t,{ButtonLink:()=>p});var l=s(64784),a=s(5936),r=s(6016),n=s(15548),i=s(63929),o=s.n(i),c=s(8380),d=s(75429),u=s(88318),m=s(30063);let h=(0,c.createContext)({isPending:!1,setIsPending:()=>{}});function x(e){let{children:t}=e,[s,a]=(0,c.useState)(!1),r=(0,c.useMemo)(()=>({isPending:s,setIsPending:a}),[s,a]);return(0,l.jsx)(h.Provider,{value:r,children:t})}function p(e){var t;let{isDisabled:s,children:a,variant:r,shape:n,size:i,mode:p,className:g,icon:j,...b}=e,v=(0,c.useContext)(d.ZD),_=(0,m.eX)(a,{tailIcon:d.qF,leadIcon:d.IM,tooltip:d.GM}),N=null!=(t=null==v?void 0:v.styles)?t:(0,d.ru)({shape:n,size:i,mode:p,variant:r});return(0,l.jsx)(x,{children:(0,l.jsx)(h.Consumer,{children:e=>{let{isPending:t}=e;return(0,l.jsx)(d.kf.Provider,{value:{styles:N},children:_.tooltip?(0,l.jsxs)(u.m_,{children:[(0,l.jsx)(u.k$,{asChild:!0,children:(0,l.jsx)(o(),{"aria-disabled":s,"aria-busy":t,className:(0,m.cn)(N.base({className:g})),onClick:e=>{s&&e.preventDefault()},...b,children:(0,l.jsx)(f,{mode:p,icon:j,styles:N,slots:_})})}),_.tooltip]}):(0,l.jsx)(o(),{"aria-disabled":s,"aria-busy":t,className:(0,m.cn)(N.base({className:g})),onClick:e=>{s&&e.preventDefault()},...b,children:(0,l.jsx)(f,{mode:p,icon:j,styles:N,slots:_})})})}})})}function f(e){let{mode:t,icon:s,styles:o,slots:d}=e,u=(0,i.useLinkStatus)(),{isPending:m,setIsPending:x}=(0,c.useContext)(h);return(0,c.useEffect)(()=>{x(u.pending)},[u.pending,x]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.N,{children:m&&(0,l.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.15}},className:o.spinner(),children:(0,l.jsx)(n.A,{className:"size-4 animate-spin"})})}),"icon-only"===t?(0,c.createElement)(s,{className:o.onlyIcon()}):(0,l.jsxs)(l.Fragment,{children:[d.leadIcon,d.main,d.tailIcon]})]})}},35287:(e,t,s)=>{s.d(t,{E:()=>d});var l=s(2007),a=s(73415),r=s(61639);let n=["dismiss-key-example"],i={"dismiss-key-example":null};var o=s(94663);let c=(0,a.vt)()((0,r.Zr)((e,t)=>({isLoaded:!1,newChatFeatures:null,selectedIntegrations:[],newChatLibraries:null,draftMessageByChatId:{},dismissedItems:n.reduce((e,t)=>(e[t]={dismissed:!1,dismissDuration:i[t],dismissedAt:null},e),{}),projectsConfiguration:{},setIsLoaded:t=>e({isLoaded:t}),setSelectedIntegrations:t=>e({selectedIntegrations:t}),setNewChatLibraries:t=>e({newChatLibraries:t}),setDraftMessageByChatId:(t,s)=>{s&&e(e=>({draftMessageByChatId:{...e.draftMessageByChatId,[t]:{...e.draftMessageByChatId[t],...s.serializedMessage?{serializedMessage:s.serializedMessage}:{}}}}))},unsetDraftMessageByChatId(t){e(e=>{let s={...e.draftMessageByChatId};return delete s[t],{draftMessageByChatId:s}})},setDismissedItem:(t,s)=>e(e=>({dismissedItems:{...e.dismissedItems,[t]:s}})),setProjectConfiguration:(t,s)=>{e(e=>({projectsConfiguration:(0,l.h)(e.projectsConfiguration,{[t]:s})}))}}),{name:"persistent-store"})),d=(0,o.L)(c)},35567:(e,t,s)=>{s.d(t,{U:()=>n,x:()=>i});var l=s(64784),a=s(8380);let r=(0,a.createContext)(void 0),n=e=>{let{children:t,...s}=e;return(0,l.jsx)(r.Provider,{value:s,children:t})},i=()=>{let e=(0,a.useContext)(r);if(!e)throw Error("usePlateformeSharedContext must be used within PlateformeSharedProvider");return e}},37640:(e,t,s)=>{s.d(t,{xL:()=>r});var l=s(89320),a=s(63309),r=function(e){return e.GENERAL="general",e.API_KEYS="apiKeys",e.USAGE="usage",e.MEMBERS="members",e.NONE="none",e}({});let n={workspace_dialog:(0,l.Oq)(Object.values(r)).withDefault("none"),workspace_dialog_expanded:(0,l.Oq)(["true","false"]).withDefault("false"),workspace_dialog_use_org_currency:(0,l.Oq)(["true","false"]).withDefault("false"),workspace_dialog_usage_date:(0,l.os)(a.Ay.object({month:a.Ay.string(),year:a.Ay.string()}).parse)};(0,l.rl)(n)},38256:(e,t,s)=>{s.d(t,{SessionProvider:()=>n,d:()=>o,w:()=>i});var l=s(64784),a=s(8380);let r=(0,a.createContext)(void 0),n=e=>{let{children:t,session:s}=e,[n,i]=(0,a.useState)(s);(0,a.useEffect)(()=>{i(s)},[s]);let o=(0,a.useMemo)(()=>({session:n,setSession:e=>n?i({...n,...e}):null}),[n,i]);return(0,l.jsx)(r.Provider,{value:o,children:t})},i=()=>{let e=(0,a.useContext)(r);if(void 0===e)throw Error("useSession must be used within a SessionProvider");let t=e.session;return null===t?null:{...e,session:t}},o=()=>{let e=(0,a.useContext)(r);if(void 0===e)throw Error("useSession must be used within a SessionProvider");let t=e.session;if(null===t)throw Error("useAuthenticatedSession must be used within a logged in only component");return{...e,session:t}}},52907:(e,t,s)=>{s.d(t,{v:()=>l.ButtonLink});var l=s(24783)},73519:(e,t,s)=>{s.d(t,{IntercomClient:()=>n});var l=s(64784),a=s(82863),r=s(8380);function n(e){let{intercomAppId:t,intercomEndpoint:s,intercomUserHash:n,userId:i,userName:o,userEmail:c,organizationId:d,organizationName:u}=e;return(0,r.useEffect)(()=>{var e,l;null==(e=(l=window).Intercom)||e.call(l,"boot",{api_base:s,app_id:t,user_id:i,user_hash:n,name:o,email:c,company:{company_id:d,name:null!=u?u:""},custom_launcher_selector:"#help-button",hide_default_launcher:!0,alignment:"right"})},[t,s,n,d,u,c,i,o]),(0,l.jsx)(a.default,{id:"intercom","data-category":"support","data-service":"intercom",children:"(function(){var w=window;var ic=w.Intercom;if(typeof ic===\"function\"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/".concat(t,"';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(document.readyState==='complete'){l();}else if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();")})}},77410:(e,t,s)=>{s.d(t,{HelpButtonClient:()=>a});var l=s(64784);function a(){return(0,l.jsx)("button",{id:"help-button",className:"disabled:pointer-auto hover:bg-secondary-100 bg-background text-secondary-500 focus-visible:outline-hidden fixed bottom-3 right-3 z-40 inline-flex hidden size-6 items-center justify-center whitespace-nowrap rounded-full border border-gray-100 p-0 text-xs font-semibold shadow-xl transition-colors disabled:opacity-50 sm:block",children:"?"})}},80383:(e,t,s)=>{s.d(t,{Nj:()=>eu,UR:()=>X.U,aV:()=>tN,XD:()=>ej,xx:()=>X.x,tQ:()=>ev});var l=s(64784),a=s(8380),r=s(30817);s(62367);var n=s(30063),i=s(55433),o=s(41896),c=s(79653),d=s(7763),u=s(93706),m=s(40560),h=s(91585),x=s(88838),p=s(43171),f=s(72944),g=s(42573),j=s(8424),b=s(20165),v=s(4580),_=s(76863);let N=e=>{let{header:t,resizeComponent:s,menuComponent:a,ref:r,...i}=e;return(0,l.jsxs)(j.ndF,{ref:r,colSpan:t.colSpan,...i,className:(0,n.cn)("text-muted relative select-none px-3 py-3 first:ps-6 last:pe-6",{"cursor-pointer":t.column.getCanSort()},i.className),onClick:e=>{var s;null==(s=i.onClick)||s.call(i,e),t.column.getCanSort()&&t.column.toggleSorting("asc"===t.column.getIsSorted())},children:[(0,l.jsxs)("div",{className:"group flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-muted flex items-center overflow-hidden",children:[t.isPlaceholder?null:(0,p.Kv)(t.column.columnDef.header,t.getContext()),t.column.getCanSort()&&(0,l.jsx)("div",{className:"text-icon-default-muted group-hover:text-icon-default ms-2",children:"asc"===t.column.getIsSorted()?(0,l.jsx)(b.A,{className:"h-3 w-3"}):"desc"===t.column.getIsSorted()?(0,l.jsx)(v.A,{className:"h-3 w-3"}):(0,l.jsx)(_.A,{className:"text-icon-muted h-3 w-3"})})]}),(0,l.jsx)("div",{className:"flex-shrink-0",children:a})]}),s,(0,l.jsx)("div",{className:"border-default absolute bottom-0 left-0 h-px w-full border-b"})]})},y=e=>{let{table:t,className:s}=e;return(0,l.jsx)(j.A0N,{className:"bg-subtle sticky top-0 z-10",children:t.getHeaderGroups().map(e=>(0,l.jsx)(j.Hjg,{className:"border-transparent",children:e.headers.map(e=>{var t;return(0,l.jsx)(N,{header:e,className:(0,n.cn)(s,null==(t=e.column.columnDef.meta)?void 0:t.thClassName)},e.id)})},e.id))})};function E(e){let{table:t,rowCount:s=3}=e;return(0,l.jsx)(l.Fragment,{children:Array.from({length:s}).map((e,s)=>(0,l.jsx)(j.Hjg,{className:"border-b-transparent",children:t.getVisibleLeafColumns().map(e=>(0,l.jsx)(j.nA6,{className:"px-3 py-3 first:ps-6 last:pe-6",children:(0,l.jsx)(j.EAD,{className:"h-8 w-full"})},"cell-".concat(s,"-").concat(e.id)))},"loading-row-".concat(s)))})}let C=e=>{let{row:t,className:s,cellClassName:a="",...r}=e;return(0,l.jsx)(j.Hjg,{className:(0,n.cn)("group/table-row border-b-transparent",s),"data-state":t.getIsSelected()&&"selected",...r,children:t.getVisibleCells().map(e=>{var t;return(0,l.jsx)(j.nA6,{className:(0,n.cn)("text-muted px-3 py-3 text-sm first:ps-6 last:pe-6",a,null==(t=e.column.columnDef.meta)?void 0:t.cellClassName),children:(0,p.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},t.id)};var w=s(12330),S=s(52614),A=s(81118),I=s(75429);function R(e){let{table:t,valuesWithTranslationsPerColumn:s,noFilterLabel:r,filterByLabel:i}=e,[o,c]=(0,a.useState)({}),[d,u]=(0,a.useState)({}),m=(0,w.useSearchParams)();(0,a.useEffect)(()=>{t.getAllLeafColumns().filter(e=>e.getIsVisible()&&e.getCanFilter()).forEach(e=>{var t;(null==(t=e.columnDef.meta)?void 0:t.syncFilter)&&e.columnDef.meta.syncFilter(e)})},[t,m]);let h=(0,a.useCallback)(e=>{u(t=>({...t,[e]:!1}))},[]);return(0,l.jsx)(l.Fragment,{children:t.getAllLeafColumns().filter(e=>e.getIsVisible()&&e.getCanFilter()).map(e=>(0,l.jsxs)(j.rId,{open:d[e.id]||!1,onOpenChange:t=>u(s=>({...s,[e.id]:t})),children:[e.getFilterValue()?(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(j.tyb,{asChild:!0,children:(0,l.jsxs)(I.$n,{shape:"pill",variant:"secondary",className:(0,n.cn)("border-darker pl-8.5 shadow-xs text-muted group my-1 border ring-0 focus-visible:ring-0"),children:[(0,l.jsx)("span",{children:e.columnDef.header}),(0,l.jsx)(I.qF,{icon:v.A,className:"text-icon-default-muted group-hover:text-icon-default"})]})}),(0,l.jsx)("div",{className:"hover:bg-muted text-icon-default-muted hover:text-icon-default absolute left-3 top-1/2 z-10 flex -translate-y-1/2 cursor-pointer items-center justify-center rounded-full p-0.5",onClick:t=>{var s;t.preventDefault(),t.stopPropagation(),(null==(s=e.columnDef.meta)?void 0:s.clearFilter)?e.columnDef.meta.clearFilter():e.setFilterValue(void 0)},children:(0,l.jsx)(S.A,{className:"h-3.5 w-3.5"})})]}):(0,l.jsx)(j.tyb,{asChild:!0,children:(0,l.jsxs)(I.$n,{shape:"pill",variant:"dashed",className:"text-muted group my-1 ring-0 focus-visible:ring-0",children:[(0,l.jsx)(I.IM,{className:"text-icon-default-muted group-hover:text-icon-default",icon:A.A}),e.columnDef.header]})}),(0,l.jsxs)(j.SQm,{align:"start",className:"w-fit",children:[(0,l.jsxs)(j.lpj,{children:[i," ",e.columnDef.header]}),(0,l.jsx)(j.mBJ,{}),(e=>{var a,n,i;let d=e.getFilterFn(),u=e.getFilterValue();if(null==(a=e.columnDef.meta)?void 0:a.filterComponent)return e.columnDef.meta.filterComponent({column:e,onClose:()=>h(e.id)});if((null==d?void 0:d.name)==="inNumberRange")return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,l.jsx)(j.pde,{type:"number",placeholder:"Min",value:null!=(n=o.min)?n:"",onChange:t=>{let s=t.target.value?Number(t.target.value):void 0;c(t=>{let l={...t,min:s};return e.setFilterValue([l.min,l.max]),l})},className:"h-8 w-20"}),(0,l.jsx)(j.pde,{type:"number",placeholder:"Max",value:null!=(i=o.max)?i:"",onChange:t=>{let s=t.target.value?Number(t.target.value):void 0;c(t=>{let l={...t,max:s};return e.setFilterValue([l.min,l.max]),l})},className:"h-8 w-20"})]})});if((null==d?void 0:d.name)==="includesString")return(0,l.jsx)("div",{className:"px-2 py-1",children:(0,l.jsx)(j.pde,{type:"search",placeholder:"Search...",value:null!=u?u:"",onChange:t=>e.setFilterValue(t.target.value),className:"h-8"})});let m=Array.from(new Set(t.getCoreRowModel().rows.map(t=>t.getValue(e.id)))).filter(Boolean);return 0===m.length?(0,l.jsx)("div",{className:"text-muted px-2 py-1.5 text-sm",children:r}):m.map(t=>{var a;let r=t;return r=(null==(a=s[e.id])?void 0:a[t])||t,(0,l.jsx)(j.hOu,{checked:u===t,onCheckedChange:s=>{e.setFilterValue(s?t:void 0)},children:r},t)})})(e)]})]},e.id))})}var T=s(38178);function k(e){let{table:t,placeholder:s,defaultValue:a}=e;return(0,l.jsx)(O,{type:"text",placeholder:s,onChange:e=>t.setGlobalFilter(String(e.target.value)),defaultValue:a})}let O=e=>{var t;let s=(0,u.c3)("Shared.common.datatable");return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(T.A,{className:"text-icon-default-muted pointer-events-none absolute left-3 top-1/2 size-4 -translate-y-1/2"}),(0,l.jsx)("input",{...e,type:"text",className:(0,n.cn)("bg-input-soft placeholder-placeholder-default h-[36px] w-full max-w-40 rounded-md border-none pe-3 ps-10 text-sm outline-none transition-all",e.className),defaultValue:e.defaultValue,placeholder:null!=(t=e.placeholder)?t:s("globalSearchFilterPlaceholder")})]})};var P=s(20206),L=s(91518);function D(e){let{table:t}=e,s=(0,u.c3)("Shared.common.datatable"),a=t.getAllFlatColumns().filter(e=>e.getIsVisible()&&e.getCanHide()).length;return(0,l.jsxs)(j.rId,{children:[(0,l.jsx)(j.tyb,{asChild:!0,children:(0,l.jsxs)(I.$n,{variant:"soft",children:[(0,l.jsx)(I.IM,{icon:P.A,className:"h-4 w-4"}),(0,l.jsx)("span",{className:"ms-1 hidden xl:flex",children:s("columnsLabel")}),(0,l.jsx)(L.Ex,{children:a})]})}),(0,l.jsxs)(j.SQm,{align:"end",className:"min-w-fit max-w-[300px]",children:[(0,l.jsx)(j.lpj,{children:s("toggleColumnsLabel")}),(0,l.jsx)(j.mBJ,{}),t.getAllFlatColumns().filter(e=>e.getCanHide()).map(e=>{var s;return(0,l.jsx)(j.hOu,{checked:e.getIsVisible(),onCheckedChange:t=>e.toggleVisibility(!!t),children:(null==(s=e.columnDef.meta)?void 0:s.visibilityDisplayName)?e.columnDef.meta.visibilityDisplayName:(0,p.Kv)(e.columnDef.header,{table:t,column:e,header:{column:e}})},e.id)})]})]})}function M(e){let{table:t,showViewOptions:s=!0,defaultValue:a,valuesWithTranslationsPerColumn:r=G,noFilterLabel:i,filterByLabel:o,globalSearchFilterPlaceholder:c,className:d}=e;return(0,l.jsxs)("div",{className:(0,n.cn)("flex w-full items-center justify-between space-x-4 px-8 py-4",d),children:[(0,l.jsx)("div",{className:"flex w-full flex-1 items-center space-x-2 overflow-x-auto",children:i&&(0,l.jsx)(R,{table:t,valuesWithTranslationsPerColumn:r,noFilterLabel:i,filterByLabel:o})}),s&&(0,l.jsx)(D,{table:t}),(0,l.jsx)(k,{table:t,placeholder:c,defaultValue:a})]})}function F(e){var t;return e.id?e.id:"accessorKey"in e?e.accessorKey:String(null!=(t=e.header)?t:"")}function B(e){return!1!==e.enableHiding}let U={},G={};function V(e){let{columns:t,data:s,noDataRow:r,tfootRef:i,rowProps:o,rowSelection:c,onRowSelectionChange:d,onGlobalFilterChange:u,defaultGlobalFilter:m,isFetchingNextPage:h,isLoading:x,initialColumnVisibility:b=U,tableId:v,cacheKey:_="default",filterByLabel:N="Filter by",noFilterLabel:w="No filter values",valuesWithTranslationsPerColumn:S=G,showViewOptions:A=!0,toolbarClassName:I="",tableWrapperClassName:R="",tableClassName:T="",cellClassName:k="",scrollPriority:O=!0,showToolbar:P=!0}=e,[L,D]=(0,a.useState)(m),V=(0,a.useCallback)(e=>{D(e),null==u||u(e)},[u]),{columnVisibility:K,onColumnVisibilityChange:z}=(e=>{let{tableId:t,cacheKey:s="default",columns:l,initialColumnVisibility:r={}}=e,[n,i]=(0,a.useState)(()=>t?function(e,t,s,l){try{let n=localStorage.getItem("".concat(e,"-").concat(t,"-column-visibility"));if(!n)return l;var a=JSON.parse(n),r=s;let i={},o=new Set(r.map(F));return r.forEach(e=>{let t=F(e);B(e)||(i[t]=!0)}),Object.entries(a).forEach(e=>{let[t,s]=e;if(o.has(t)){let e=r.find(e=>F(e)===t);e&&B(e)&&(i[t]=s)}}),r.forEach(e=>{let t=F(e);!B(e)||t in i||(i[t]=!0)}),i}catch(e){return l}}(s,t,l,r):r),o=(0,a.useCallback)(e=>{i(e),t&&function(e,t,s,l){try{let a=new Set(l.map(F)),r=Object.entries(s).reduce((e,t)=>{let[s,l]=t;return a.has(s)&&(e[s]=l),e},{});localStorage.setItem("".concat(e,"-").concat(t,"-column-visibility"),JSON.stringify(r))}catch(e){}}(s,t,(0,f.Zw)(e,n),l)},[s,n,l,t]);return{columnVisibility:n,onColumnVisibilityChange:o}})({columns:t,cacheKey:_,tableId:v,initialColumnVisibility:b}),[Y,Q]=(0,a.useState)([]),H=(0,p.N4)({data:s,columns:t,getCoreRowModel:(0,f.HT)(),getFilteredRowModel:(0,f.hM)(),globalFilterFn:"includesString",onGlobalFilterChange:V,onColumnVisibilityChange:z,onSortingChange:Q,getSortedRowModel:(0,f.h5)(),onRowSelectionChange:d,state:{sorting:Y,globalFilter:L,columnVisibility:K,rowSelection:c||{}},enableRowSelection:!0}),{ref:$,isIntersecting:W}=(0,g.BL)({threshold:.5});return(0,l.jsxs)(l.Fragment,{children:[P&&(0,l.jsx)(M,{table:H,defaultValue:m,showViewOptions:A,filterByLabel:N,valuesWithTranslationsPerColumn:S,noFilterLabel:w,className:I}),(0,l.jsx)("div",{ref:$,className:"pointer-events-none h-[1px] w-full opacity-0"}),(0,l.jsxs)(j.XIK,{className:(0,n.cn)("w-full border-b-transparent",T),wrapperClassName:(0,n.cn)("w-full",!O&&"overflow-visible",s.length>0&&"h-full",R),blockInnerScrolling:!O&&W,children:[(0,l.jsx)(y,{table:H,className:k}),(0,l.jsx)(j.BFY,{children:x?(0,l.jsx)(E,{table:H,rowCount:5}):H.getRowModel().rows.length?H.getRowModel().rows.map(e=>(0,l.jsx)(C,{row:e,cellClassName:k,...o?o(e.original):{}},e.id)):r||(0,l.jsx)(j.Hjg,{children:(0,l.jsx)(j.nA6,{colSpan:t.length,className:"h-24 text-center",children:"No results."})})}),i&&(h?(0,l.jsx)(j.Gg1,{ref:i,children:(0,l.jsx)(E,{table:H,rowCount:3})}):(0,l.jsx)(j.Gg1,{ref:i}))]})]})}var K=s(85148),z=s(56337),Y=s(88318);function Q(e){let{date:t,className:s}=e,{format:r,formatDistanceToNowStrict:n}=(0,z.lT)(),i=(0,u.c3)("Shared.common.time"),[,o]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=setInterval(()=>{o(e=>e+1)},6e4);return()=>clearInterval(e)},[]),(0,l.jsxs)(Y.m_,{children:[(0,l.jsx)(Y.k$,{className:s,children:(()=>{let e=new Date,s=new Date(t);return Math.abs(e.getTime()-s.getTime())/1e3<60?i("justNow"):n(t,{addSuffix:!0})})()}),(0,l.jsx)(Y.ZI,{children:r(t,"PPPP p")})]})}var H=function(e){return e.CREATED_AT="createdAt",e.EXPIRATION="expiration",e}({});function $(e){var t;let s,{status:d,hasActivePlan:p,organizationId:f,context:g,workspaceId:b,variant:v="default",canDeleteApiKey:_}=e,N=(0,u.c3)("Shared.APIKeys"),y=(0,i.useQueryClient)(),E=["api-keys",(s={status:d,organizationId:f,context:g,workspaceId:b}).status,s.organizationId,s.context,...s.context===x.BR.CONSOLE&&s.workspaceId?[s.workspaceId]:[]],{ref:C,inView:w}=(0,m.Wx)({threshold:1,delay:100}),{data:S,fetchNextPage:A,hasNextPage:I,isFetchingNextPage:R,isLoading:T}=(0,o.useInfiniteQuery)({queryKey:[...E,g],queryFn:async e=>{let{pageParam:t=0}=e,s=new URLSearchParams({status:d.toString(),offset:String(t),limit:String(30)});g===x.BR.SETTINGS_MANAGER&&s.append("list_all_org_keys","true");let l=await (0,r.QR)("/billing/api-keys?".concat(s.toString()));if(!l.ok)throw Error("Failed to list API keys");return l.json()},initialPageParam:0,getNextPageParam:(e,t)=>{if(30===e.keys.length)return 30*t.length},enabled:p});(0,a.useEffect)(()=>{w&&I&&!R&&A().catch(()=>{})},[w,I,A,R]);let k=null!=(t=null==S?void 0:S.pages.flatMap(e=>e.keys))?t:[],O=(0,c.useMutation)({mutationFn:async e=>{if(!(await (0,r.QR)("/billing/api-keys/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete API key")},onMutate:async e=>{await y.cancelQueries({queryKey:E});let t=y.getQueryData(E);return y.setQueryData(E,t=>t?{...t,pages:t.pages.map(t=>({...t,keys:t.keys.filter(t=>t.key_id!==e)}))}:t),{previousData:t,queryKey:E}},onSuccess:()=>{h.oR.success(N("deleteSuccess"))},onError:(e,t,s)=>{(null==s?void 0:s.previousData)&&y.setQueryData(s.queryKey,s.previousData),h.oR.error(N("deleteError"))},onSettled:()=>{y.invalidateQueries({queryKey:E})}}),P=(e=>{let{onDeleteKey:t,status:s,context:a,canDelete:i}=e,o=(0,u.c3)("Shared.APIKeys"),c=(e,t)=>e?(0,l.jsx)(Q,{date:e}):t===H.EXPIRATION?o("never"):"-",d=[];return d.push({accessorFn:e=>e.name||o("noName"),id:"name",header:o("table.name"),enableColumnFilter:!1,filterFn:"includesString",meta:{cellClassName:"w-full"},cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"text-default flex flex-col font-medium",children:(0,l.jsx)("span",{children:t.original.name||(0,l.jsx)("span",{className:"text-muted text-sm italic",children:o("noName")})})})}}),d.push({accessorFn:e=>"".concat(e.hidden_key," ").concat(e.product||""),id:"key",header:o("table.key"),enableColumnFilter:!1,filterFn:"includesString",cell:e=>{let t,{row:s}=e,a=s.original.product,r=s.original.hidden_key;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("span",{className:"text-muted font-mono text-sm",children:(t=r).length<=6?t:"".concat(t.slice(0,2),"...").concat(t.slice(-4))}),a&&(0,l.jsx)(L.Ex,{className:"w-fit",size:"sm",colorScheme:"neutral",children:a})]})}}),d.push({accessorFn:e=>e.created_by||"",id:"created",header:o("table.created"),enableColumnFilter:!1,enableSorting:!0,filterFn:"includesString",meta:{cellClassName:"min-w-[128px]"},cell:e=>{let{row:t}=e,s=c(t.original.created_at,H.CREATED_AT),r=t.original.created_by;return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"text-muted text-sm",children:s}),a===x.BR.SETTINGS_MANAGER&&r&&(0,l.jsx)("span",{className:"text-muted text-xs",children:r})]})}}),d.push({accessorKey:"expiration_date",header:o("table.expires"),enableColumnFilter:!1,enableSorting:!0,meta:{cellClassName:"min-w-[128px]"},cell:e=>{let{row:t}=e;return(0,l.jsx)("span",{className:"text-muted text-sm",children:c(t.original.expiration_date,H.EXPIRATION)})}}),a===x.BR.SETTINGS_MANAGER&&d.push({accessorKey:"workspace_name",header:o("table.workspace"),enableColumnFilter:!1,enableSorting:!0,cell:e=>{let{row:t}=e;return(0,l.jsx)("span",{className:"text-muted text-sm",children:t.original.workspace_name||"-"})}}),i&&d.push({id:"actions",enableHiding:!1,meta:{cellClassName:"min-w-[110px]"},cell:e=>{let{row:a}=e,c=a.original;return(0,l.jsx)("div",{className:"flex justify-end",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(j.ZFl,{isDisabled:s!==r.S2.ACTIVE||!i,className:(0,n.cn)(s!==r.S2.ACTIVE&&"pointer-events-none opacity-0","text-icon-default-muted"),variant:"ghost",onConfirm:()=>t(c),confirmText:o("table.deleteConfirm"),confirmTooltip:o("table.deleteConfirmTooltip"),children:(0,l.jsx)(K.A,{className:"h-4 w-4"})})})}}),d})({onDeleteKey:e=>{O.mutate(e.key_id)},status:d,context:g,canDelete:_}),D=((e,t)=>{let s=(0,u.c3)("Shared.APIKeys");return(0,l.jsx)(j.Hjg,{children:(0,l.jsx)(j.nA6,{colSpan:e,className:"h-40 text-center",children:s(t===r.S2.ACTIVE?"noActiveKeys":"noExpiredKeys")})})})(P.length,d);return(0,l.jsx)(V,{columns:P,data:k,noDataRow:D,tfootRef:C,isFetchingNextPage:R,isLoading:T,tableId:"".concat(d,"-api-keys-table"),cacheKey:"".concat(f,"-").concat(b||""),scrollPriority:!1,toolbarClassName:"compact"===v?"px-0":void 0,tableClassName:"compact"===v?"border-0":void 0,tableWrapperClassName:(0,n.cn)("compact"===v?"rounded-md border":void 0)})}(0,d.default)(()=>Promise.resolve($),{ssr:!1}),s(31991);var W=s(801),q=s(24180),X=s(35567);let J={all:["plateforme-shared","profile-dialog","email-preferences-link"]},Z=()=>{let{callDashboardFromClient:e,env:t}=(0,X.x)();return(0,q.useQuery)({queryKey:J.all,queryFn:async()=>{let t=await e("/users/email-preferences-link");return await t.json()},enabled:!t.NEXT_PUBLIC_READ_ONLY_PROFILE})},ee={all:["org-members"],me:()=>[...ee.all,"me"]},et={all:["subscription"],details:e=>[...et.all,e]},es=e=>{let{callDashboardFromClient:t}=(0,X.x)();return(0,q.useQuery)({queryKey:et.details(e),queryFn:async()=>{var s,l;let a=await t("/billing/subscriptions?plan_type=".concat(e));return null!=(l=null==(s=(await a.json()).subscriptions[0])?void 0:s.subscription)?l:null}})};var el=s(63929),ea=s.n(el);s(52907);var er=s(21956),en=s(2403),ei=s(1883),eo=s(34011);ei.Ik({amount:ei.ai().min(10)});var ec=s(94399),ed=s(13797);function eu(e){let{userRole:t,compact:s=!1,variant:r}=e,i=(0,u.c3)("Shared.navigation"),o=(0,w.usePathname)(),[c,d]=(0,a.useState)(!1),{app:m,env:h}=(0,X.x)(),p=(0,ed.xQ)({userRole:t}),f=[{appKey:x.BR.LE_CHAT_WEB,name:i("appSwitcher.leChat"),href:h.NEXT_PUBLIC_LE_CHAT_URL,bgColor:"bg-state-brand",icon:(0,l.jsx)(j.W7J,{color:"text-white-default"})},{appKey:x.BR.CONSOLE,name:i("appSwitcher.aiStudio"),href:h.NEXT_PUBLIC_AI_STUDIO_URL,bgColor:"bg-basic-bluedeep-accent",icon:(0,l.jsx)(j.W7J,{color:"text-white-default"})},{appKey:null,name:i("appSwitcher.docsApi"),href:"https://docs.mistral.ai",bgColor:"bg-basic-gray-alpha-10",icon:(0,l.jsx)(j.W7J,{color:"text-icon-default-subtle"})}],g=p?[{appKey:x.BR.SETTINGS_MANAGER,name:i("appSwitcher.admin"),href:h.NEXT_PUBLIC_ADMIN_URL,bgColor:"bg-basic-gray-alpha-10",icon:(0,l.jsx)(ec.A,{className:"text-icon-default-subtle h-4 w-4"})}]:[],b=(0,a.useCallback)((e,t)=>{e.stopPropagation(),t.appKey===m&&o===t.href&&e.preventDefault(),d(!1)},[o,m]),_=[...f,...g].find(e=>e.appKey===m),N={dark:"text-white-default",light:"text-dark-default dark:text-white-default"};return(0,l.jsxs)(j.rId,{open:c,onOpenChange:d,children:[(0,l.jsx)(j.tyb,{asChild:!0,children:(0,l.jsxs)(I.$n,{variant:"ghost",className:(0,n.cn)({dark:"hover:not-disabled:bg-(--zinc-700) active:not-disabled:bg-(--zinc-700)",light:"hover:not-disabled:bg-(--zinc-200) active:not-disabled:bg-(--zinc-200) dark:hover:not-disabled:bg-(--zinc-700) dark:active:not-disabled:bg-(--zinc-700)"}[r],"h-12",s?"w-12":"gap-3 px-2",N[r]),children:[(0,l.jsx)("div",{className:(0,n.cn)("flex h-8 w-8 shrink-0 items-center justify-center overflow-hidden rounded-sm",null==_?void 0:_.bgColor),children:(0,l.jsx)("div",{className:"flex h-4 w-4 items-center justify-center",children:null==_?void 0:_.icon})}),!s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:(0,n.cn)("min-w-0 truncate text-sm font-bold",N[r]),children:null==_?void 0:_.name}),(0,l.jsx)(v.A,{className:"size-2"})]})]})}),(0,l.jsxs)(j.SQm,{align:"start",className:"w-56 p-2",children:[f.map(e=>(0,l.jsx)(em,{app:e,onClick:b,isCurrent:e.appKey===m},e.appKey)),g.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.mBJ,{className:"my-2"}),g.map(e=>(0,l.jsx)(em,{app:e,onClick:b,isCurrent:e.appKey===m},e.appKey))]})]})]})}function em(e){let{app:t,onClick:s,isCurrent:a}=e;return(0,l.jsx)(j._26,{asChild:!0,className:"rounded-md",children:(0,l.jsxs)(ea(),{href:t.href,target:a?void 0:"_blank",rel:a?void 0:"noopener",onClick:e=>s(e,t),className:"hover:bg-subtle flex w-full cursor-pointer items-center gap-4 p-2 transition-colors",children:[(0,l.jsx)("div",{className:(0,n.cn)("flex h-8 w-8 shrink-0 items-center justify-center overflow-hidden rounded-sm",t.bgColor),children:(0,l.jsx)("div",{className:"flex h-4 w-4 items-center justify-center",children:t.icon})}),(0,l.jsx)("span",{className:"text-sm font-bold",children:t.name})]})})}s(4791);var eh=s(96831);let ex={all:["settings-flow"]},ep=e=>{let{ory:t,flowId:s}=e,{env:l}=(0,X.x)(),r=(0,i.useQueryClient)(),n=(0,w.useRouter)(),o=(0,q.useQuery)({queryKey:ex.all,queryFn:async()=>s?t.getSettingsFlow({id:s}):t.createBrowserSettingsFlow({returnTo:window.location.href}),enabled:!l.NEXT_PUBLIC_READ_ONLY_PROFILE});return(0,a.useEffect)(()=>{o.error&&(0,eh.B)({onRestartFlow:()=>{r.invalidateQueries({queryKey:ex.all})},onValidationError:e=>{r.setQueryData(ex.all,e)},onRedirect:e=>n.push(e)})(o.error)},[o.error,r,n]),o};var ef=s(2308),eg=s(89320),ej=function(e){return e.Profile="profile",e.Preferences="preferences",e.Security="security",e.Chat="chat",e.None="none",e}({});let eb={profile_dialog:(0,eg.Oq)(Object.values(ej)).withDefault("none")},ev=()=>{let[{profile_dialog:e},t]=(0,ef.ab)(eb);return{profileDialogOpen:"none"!==e,profileDialogMenu:e,openProfileDialog:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"profile";t({profile_dialog:e})},openProfileDialogMenu:e=>{t({profile_dialog:e})},closeProfileDialog:()=>{t({profile_dialog:"none"})}}};(0,eg.rl)(eb);let e_=(0,a.createContext)({}),eN=e=>{let{user:t,children:s}=e,{profileDialogOpen:r,openProfileDialog:n,closeProfileDialog:i}=ev(),o=(0,a.useMemo)(()=>({user:t}),[t]);return(0,l.jsx)(j.lGe,{open:r,onOpenChange:e=>{e?n():i()},children:eC(o)?(0,l.jsxs)(e_.Provider,{value:o,children:[s,r&&(0,l.jsx)(ew,{})]}):(0,l.jsx)(ey,{})})},ey=()=>null,eE=()=>{let e=(0,a.useContext)(e_);if(!eC(e))throw Error("useProfileDialogContext must be used within a ProfileDialogManager");return e};function eC(e){return void 0!==e.user}let ew=()=>{let{trpc:e,ory:t}=(0,X.x)(),s=(0,w.useSearchParams)();return e.chat.organization.settings.usePrefetchQuery(),e.chat.user.getAcceleratedAnswers.usePrefetchQuery(),e.chat.user.getLocalisationConsent.usePrefetchQuery(),Z(),es(r.OL.CHAT),ep({ory:t,flowId:s.get("flow")}),null};var eS=s(47753),eA=s(28323),eI=s(43472),eR=s(38875);let eT=e=>{let{username:t,size:s="sm"}=e,a="sm"===s?(0,n.cn)("size-8 text-xs"):(0,n.cn)("size-16 text-2xl");if(!t)return(0,l.jsx)("div",{className:(0,n.cn)("flex aspect-square shrink-0 items-center justify-center truncate rounded-lg bg-[#E8E1D7] font-semibold",a)});let r=(0,j.IMx)(t);return(0,l.jsx)("div",{className:(0,n.cn)("text-dark-default flex aspect-square shrink-0 items-center justify-center truncate rounded-lg bg-[#E8E1D7] font-semibold",a),children:r})},ek=()=>{let{user:e}=eE();return(0,l.jsxs)("div",{className:(0,n.cn)("items-center gap-2","hidden md:flex"),children:[(0,l.jsx)(eT,{username:e.name}),(0,l.jsxs)("div",{className:(0,n.cn)("flex flex-col gap-0.5 overflow-hidden leading-none"),children:[(0,l.jsx)("div",{className:"truncate text-xs font-medium",children:e.name}),(0,l.jsx)("div",{className:"text-muted text-2xs truncate",children:e.email})]})]})},eO=()=>{let e=(0,u.c3)("Shared.Account.sidebar.dialog"),{profileDialogMenu:t,openProfileDialogMenu:s}=ev(),{env:a}=(0,X.x)(),r=[{label:e("profile"),icon:eS.A,menu:ej.Profile},{label:e("security"),icon:eA.A,menu:ej.Security,hiddenOnPrem:!0},{label:e("chat"),icon:eI.A,menu:ej.Chat},{label:e("preferences"),icon:eR.A,menu:ej.Preferences}].filter(e=>!(a.NEXT_PUBLIC_READ_ONLY_PROFILE&&e.hiddenOnPrem));return(0,l.jsxs)("div",{className:"bg-muted md:border-b-none flex w-full flex-col gap-6 border-b-[0.5px] p-3 md:h-full md:w-[220px] md:border-r-[0.5px]",children:[(0,l.jsx)(ek,{}),(0,l.jsx)("div",{className:(0,n.cn)("flex flex-row flex-wrap gap-1","md:flex-col","mr-6 md:mr-0"),children:r.map(e=>{let a=e.menu===t;return(0,l.jsxs)("button",{className:(0,n.cn)("hover:bg-state-soft data-[active=true]:bg-state-soft text-default ring-(--secondary-300) dark:ring-(--secondary-700) flex h-8 items-center gap-2 rounded-md px-2 text-sm transition-[width,height,padding] transition-colors focus:outline-none focus:ring-1 data-[active=true]:font-medium md:gap-2"),onClick:()=>s(e.menu),"data-active":a,tabIndex:a?0:void 0,autoFocus:a,children:[(0,l.jsx)(e.icon,{className:"h-3.5 w-3.5"}),(0,l.jsx)("span",{children:e.label})]},e.label)})})]})},eP=(0,n.cn)("h-[calc(100%-66px)]"),eL=e=>{let{title:t,children:s}=e;return(0,l.jsxs)("div",{className:"h-full flex-1",children:[(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)(j.L33,{children:t})}),(0,l.jsx)(j.FKN,{className:(0,n.cn)("h-full w-full",eP),children:(0,l.jsx)("div",{className:"mb-6 flex h-full flex-col gap-6 px-6",children:s})})]})};var eD=s(15604),eM=s(47765),eF=s(82248),eB=s(43972);let eU=e=>{let{ory:t,settingsFlow:s,oryApiUrl:l}=e,a=(0,i.useQueryClient)(),r=(0,w.useRouter)();return(0,c.useMutation)({mutationFn:async e=>{if(!s)return;let l=(e=>{var t,s;return e?null==(s=e.ui.nodes.find(e=>"input"===e.attributes.node_type&&"csrf_token"===e.attributes.name))||null==(t=s.attributes)?void 0:t.value:null})(s);return t.updateSettingsFlow({flow:s.id,updateSettingsFlowBody:{...e,csrf_token:l}})},onSuccess:e=>{e&&(a.setQueryData(ex.all,e),(0,eB.gY)(e.continue_with,{onRedirect:e=>{r.push(((e,t)=>(t.startsWith(e)&&(t=t.replace(e,"".concat(window.location.protocol,"//").concat(window.location.hostname))),t))(l,e))}}))},onError:e=>(0,eh.B)({onRestartFlow:()=>{a.invalidateQueries({queryKey:ex.all})},onValidationError:e=>{a.setQueryData(ex.all,e)},onRedirect:e=>r.push(e)})(e)})},eG=e=>{let{title:t,description:s,children:a,footer:r}=e;return(0,l.jsxs)("div",{className:(0,n.cn)("bg-card overflow-hidden rounded-lg border-[0.5px] px-5 py-6 shadow-sm",!!r&&"pb-0"),children:[(0,l.jsxs)("div",{className:"mb-6 flex flex-col gap-1",children:[(0,l.jsx)("h2",{className:"text-md m-0 p-0 font-semibold",children:t}),s&&(0,l.jsx)("p",{className:"text-muted text-xs",children:s})]}),(0,l.jsx)("div",{className:"space-y-4",children:a}),r&&(0,l.jsx)("div",{className:"bg-subtle/50 -mx-5 mt-6 border-t-[0.5px] p-4",children:r})]})},eV=e=>{let{title:t,description:s,className:a,layout:r="auto",isLoading:i,children:o}=e;return(0,l.jsxs)("div",{className:(0,n.cn)((()=>{switch(r){case"horizontal":return"flex flex-row items-center justify-between gap-4";case"vertical":return"flex flex-col gap-3";default:return"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"}})(),a),children:[(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsxs)("h3",{className:"flex items-center text-sm font-medium",children:[t,i&&(0,l.jsx)(j.kt7,{className:"ms-2 inline-block h-4 w-4"})]}),s&&(0,l.jsx)("p",{className:"text-muted text-xs",children:s})]}),(0,l.jsx)("div",{className:(0,n.cn)("flex",{"opacity-50":i}),children:o})]})},eK=e=>"info"===e?"information":"error"===e?"error":"success"===e?"success":void 0,ez=e=>{var t,s;let{ory:r,oryApiUrl:n}=e,i=(0,w.useRouter)(),o=(0,u.c3)("Shared.Account.profile"),[c,d]=(0,a.useState)(),m=(0,w.useSearchParams)(),{env:h}=(0,X.x)(),x=ep({ory:r,flowId:m.get("flow")}).data,p=eU({ory:r,oryApiUrl:n,settingsFlow:x}),f=(0,a.useMemo)(()=>ei.Ik({traits:ei.Ik({email:ei.Yj().email(),name:ei.Ik({first:ei.Yj().min(1,o("firstNameRequired")).max(256),last:ei.Yj().min(1,o("lastNameRequired")).max(256)})})}),[o]),g=(0,a.useMemo)(()=>ei.Ik({email:ei.eu(null==c?void 0:c.traits.email,{errorMap:()=>({message:o("email.mismatch")})})}),[c,o]),{user:b}=eE(),v=(0,eF.mN)({defaultValues:{traits:{email:b.email,name:{first:null!=(t=b.first_name)?t:"",last:null!=(s=b.last_name)?s:""}}},resolver:(0,eD.u)(f)}),_=(0,eF.mN)({defaultValues:{email:""},resolver:(0,eD.u)(g)}),N=(0,a.useCallback)(async e=>p.mutateAsync({...e,method:"profile"}),[p]),y=(0,a.useCallback)(async e=>{if(e.traits.email!==b.email)return void d(e);d(void 0),await N(e),i.refresh()},[N,b.email]),E=(0,a.useCallback)(async()=>{c&&await N(c)},[N,c]);return(0,l.jsx)(j.lVW,{...v,children:(0,l.jsx)("form",{onSubmit:v.handleSubmit(e=>y(e)),children:(0,l.jsxs)(eG,{title:o("title"),footer:(0,l.jsxs)("div",{className:"flex w-full flex-col-reverse items-end justify-between gap-4 md:flex-row md:items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col items-end gap-1 md:flex-row md:items-center md:gap-3",children:[(0,l.jsx)("span",{className:"text-muted text-xs",children:o("userID.title")}),(0,l.jsx)(j.aTS,{text:b.uuid,variant:"medium",confirmToast:o("userID.copiedToClipboard"),truncatedLength:8})]}),h.NEXT_PUBLIC_READ_ONLY_PROFILE?null:(0,l.jsx)(l.Fragment,{children:null!==x&&(0,l.jsx)(I.$n,{type:"submit",isLoading:p.isPending,children:o("saveButton")})})]}),children:[(null==x?void 0:x.ui.messages)&&x.ui.messages.length>0&&(0,l.jsx)("div",{className:"mt-4",children:x.ui.messages.map(e=>(0,l.jsx)(er.F,{state:eK(e.type),children:e.text},e.id))}),(0,l.jsx)(j.LtD,{open:void 0!==c,onOpenChange:()=>{d(void 0)},children:(0,l.jsx)(j.EOR,{children:(0,l.jsx)(j.lVW,{..._,children:(0,l.jsxs)("form",{onSubmit:_.handleSubmit(()=>E()),className:"space-y-4",children:[(0,l.jsxs)(j.wdJ,{children:[(0,l.jsx)(j.r79,{children:o("email.verify")}),(0,l.jsx)(j.$vl,{children:o("email.verifyDescription")})]}),(0,l.jsx)(j.zBI,{control:_.control,name:"email",render:e=>{let{field:t}=e;return(0,l.jsxs)(j.eIh,{children:[(0,l.jsx)(j.lRv,{className:"mb-1",children:o("email.label")}),(0,l.jsx)(j.MJN,{children:(0,l.jsx)(W.pd,{...t})}),(0,l.jsx)(j.C5h,{})]})}}),(0,l.jsxs)(j.ckB,{children:[(0,l.jsx)(j.ZrO,{children:o("email.cancel")}),(0,l.jsx)(I.$n,{type:"submit",isLoading:p.isPending,children:o("email.confirm")})]})]})})})}),(0,l.jsxs)("div",{children:[null===x&&(0,l.jsxs)(j.FcD,{className:"bg-sidebar-subtle text-subtle my-4",children:[(0,l.jsx)(eM.A,{className:"h-4 w-4"}),(0,l.jsx)(j.TND,{className:"font-normal",children:o("ssoEnabled")})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col gap-4",onSubmit:v.handleSubmit(e=>y(e)),children:[(0,l.jsxs)("div",{className:"flex w-full flex-col items-center gap-4 md:flex-row",children:[(0,l.jsx)(eT,{username:b.name,size:"md"}),(0,l.jsx)(j.zBI,{control:v.control,name:"traits.email",render:e=>{let{field:t}=e;return(0,l.jsxs)(j.eIh,{className:"flex w-full flex-1 flex-col gap-2",children:[(0,l.jsx)(j.lRv,{className:"mb-0 flex-1",children:(0,l.jsx)("div",{className:"text-sm font-medium",children:o("email.title")})}),h.NEXT_PUBLIC_READ_ONLY_PROFILE?(0,l.jsx)(l.Fragment,{children:t.value}):(0,l.jsx)(j.MJN,{className:"flex-1",children:(0,l.jsx)(W.pd,{className:"py-2",isDisabled:!x,...t})}),(0,l.jsx)(j.C5h,{})]})}})]}),(0,l.jsxs)("div",{className:"flex w-full flex-col gap-4 md:flex-row",children:[(0,l.jsx)(j.zBI,{control:v.control,name:"traits.name.first",render:e=>{let{field:t}=e;return(0,l.jsxs)(j.eIh,{className:"flex flex-1 flex-col gap-2",children:[(0,l.jsx)(j.lRv,{className:"mb-0 flex-1",children:o("firstName")}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col",children:[h.NEXT_PUBLIC_READ_ONLY_PROFILE?(0,l.jsx)(l.Fragment,{children:t.value}):(0,l.jsx)(j.MJN,{children:(0,l.jsx)(W.pd,{isDisabled:!x,...t})}),(0,l.jsx)(j.C5h,{})]})]})}}),(0,l.jsx)(j.zBI,{control:v.control,name:"traits.name.last",render:e=>{let{field:t}=e;return(0,l.jsxs)(j.eIh,{className:"flex flex-1 flex-col gap-2",children:[(0,l.jsx)(j.lRv,{className:"mb-0 flex-1",children:o("lastName")}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col",children:[h.NEXT_PUBLIC_READ_ONLY_PROFILE?(0,l.jsx)(l.Fragment,{children:t.value}):(0,l.jsx)(j.MJN,{children:(0,l.jsx)(W.pd,{isDisabled:!x,...t})}),(0,l.jsx)(j.C5h,{})]})]})}})]})]})]})]})})})};var eY=s(81041);let eQ=()=>{let e=(0,w.useRouter)(),t=(0,u.c3)("Shared.Account.profile.dangerZone.leaveOrg"),s=(0,u.c3)("Shared.Organization.members"),a=(0,u.c3)("Shared.ErrorMessage.dashboard"),n=(()=>{let{callDashboardFromClient:e}=(0,X.x)(),t=(0,i.useQueryClient)();return(0,c.useMutation)({mutationFn:async t=>{let s=await e("/users/organization/members/".concat(t),{method:"DELETE"});if(!s.ok){let e=await s.json();if((0,r.q9)(e.error_code))throw new r.jq(e.error_code);throw new x._V("error leaving organization",{response:s})}return!0},onMutate:async()=>{await t.cancelQueries({queryKey:ee.all})},onSettled:async()=>{await t.invalidateQueries({queryKey:ee.all})}})})(),{confirm:o}=(0,j.G_o)(),{user:d}=eE();return(0,l.jsx)(I.$n,{variant:"destructive",onClick:()=>o({title:s("leave.title"),description:s("leave.description"),confirm:{onClick:()=>n.mutateAsync(d.uuid,{onSuccess:()=>{(0,h.oR)(s("leave.toastSuccess")),e.push("/")},onError:e=>{if(e instanceof eY.fk)return void(0,h.oR)(s("leave.toastError"));(0,h.oR)(a(e.code.toString()))}}),isDestructive:!0}}),children:t("title")})};function eH(){let{ory:e,env:t,callDashboardFromClient:s}=(0,X.x)(),n=(0,u.c3)("Shared.Account.profile.dangerZone"),i=(0,u.c3)("Shared.ErrorMessage.dashboard"),o=(0,w.useRouter)(),[d,m]=(0,a.useState)(!1),{user:x}=eE(),p=ei.Ik({email:ei.Yj().email()}).refine(e=>e.email===x.email,{message:n("deleteAccount.dialog.errorEmail"),path:["email"]}),f=(0,eF.mN)({defaultValues:{email:""},resolver:(0,eD.u)(p)}),g=(0,c.useMutation)({mutationFn:async()=>{let e=await s("/users/me",{method:"DELETE"});if(!e.ok){let t=await e.json();throw new r.jq(t.error_code)}return!0},onSuccess:()=>{o.push("/login")},onError:e=>{(0,r.q9)(e.code)?(0,h.oR)(i(e.code.toString())):(0,h.oR)(n("deleteAccount.dialog.toastError")),m(!1)}}),b=async()=>{let s,l=(e=>{let{orySdkUrl:t,flowType:s,params:l}=e;return new URL("/self-service/"+s.toString()+"/browser?"+l.toString(),t).toString()})({orySdkUrl:t.NEXT_PUBLIC_ORY_API_URL,flowType:"login",params:new URLSearchParams({refresh:"true",return_to:window.location.href})});try{s=(await e.toSession()).authenticated_at}catch(e){o.push(l);return}if(!s||(Date.now()-s.getTime())/1e3>parseInt("300"))return void o.push(l);m(!0),g.mutate()};return(0,l.jsxs)(eG,{title:n("title"),children:[(0,l.jsx)(eV,{title:n("leaveOrg.title"),children:(0,l.jsx)(eQ,{})}),(0,l.jsx)(eV,{title:n("deleteAccount.subtitle"),children:(0,l.jsxs)(j.lGe,{children:[(0,l.jsx)(j.zMO,{asChild:!0,children:(0,l.jsx)(I.$n,{variant:"destructive",children:n("deleteAccount.dialog.title")})}),(0,l.jsxs)(j.Cff,{children:[(0,l.jsxs)(j.c75,{className:"border-b pb-2",children:[(0,l.jsx)(j.L33,{children:n("deleteAccount.dialog.title")}),(0,l.jsx)(j.rrK,{})]}),(0,l.jsx)("span",{className:"text-muted mb-4 text-sm",children:n("deleteAccount.dialog.promptLine1")}),(0,l.jsx)("span",{className:"text-muted mb-4 text-sm",children:n("deleteAccount.dialog.promptLine2")}),(0,l.jsx)(j.lVW,{...f,children:(0,l.jsxs)("form",{onSubmit:f.handleSubmit(b),className:"flex flex-col",children:[(0,l.jsx)(j.zBI,{control:f.control,name:"email",render:e=>{let{field:t}=e;return(0,l.jsxs)(j.eIh,{children:[(0,l.jsx)(j.lRv,{children:n("deleteAccount.dialog.emailInput")}),(0,l.jsx)(j.MJN,{children:(0,l.jsx)(j.pde,{type:"email",...t})}),(0,l.jsx)(j.C5h,{})]})}}),(0,l.jsx)(I.$n,{className:"ms-auto mt-4",type:"submit",isDisabled:d,variant:"destructive",children:n("deleteAccount.dialog.title")})]})})]})]})})]})}let e$=()=>{var e;let t=Z(),s=(0,u.c3)("Shared.Account.emailPreferences");return(null==(e=t.data)?void 0:e.email_preferences_link)?(0,l.jsx)(eG,{title:s("title"),children:(0,l.jsx)(eV,{title:s("subtitle"),description:s("description"),children:(0,l.jsx)("a",{href:t.data.email_preferences_link,target:"_blank",rel:"noopener noreferrer",className:(0,I.ru)({variant:"soft"}).base(),children:s("goToPortalButton")})})}):null};function eW(){let e=(0,u.c3)("Shared.Account.export.chat"),{trpc:t}=(0,X.x)(),s=t.chat.user.exportPersonalData.useMutation({onSuccess:()=>{(0,h.oR)(e("exported"))},onError:()=>{h.oR.error(e("exportFailed"))}});return s.isPending?(0,l.jsx)(I.$n,{isDisabled:!0,children:e("exporting")}):s.data?(0,l.jsx)(ea(),{className:(0,I.ru)().base(),href:s.data,children:e("download")}):(0,l.jsx)(I.$n,{onClick:()=>s.mutate(),children:e("export")})}function eq(){let{callDashboardFromClient:e}=(0,X.x)(),t=(0,u.c3)("Shared.Account.export.support"),s=(0,c.useMutation)({mutationFn:async()=>{let t=await e("/users/export/intercom",{method:"POST"});if(!t.ok){if(404===t.status)return null;throw new x._V("error exporting support data",{response:t})}return t.blob()},onSuccess:e=>{if(!e)return void(0,h.oR)(t("empty"));let s=window.URL.createObjectURL(e),l=document.createElement("a");l.style.display="none",l.href=s,l.download="intercom_data.zip",document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(s),(0,h.oR)(t("exported"))},onError:()=>{h.oR.error(t("exportFailed"))}});return s.isPending?(0,l.jsx)(I.$n,{isDisabled:!0,children:t("exporting")}):(0,l.jsx)(I.$n,{onClick:()=>s.mutate(),children:t("export")})}let eX=()=>{let e=(0,u.c3)("Shared.Account.export");return(0,l.jsxs)(eG,{title:e("title"),description:e("description"),children:[(0,l.jsx)(eV,{title:e("chat.title"),description:e("chat.description"),children:(0,l.jsx)(eW,{})}),(0,l.jsx)(eV,{className:"mt-4 border-t pt-4",title:e("support.title"),description:e("support.description"),children:(0,l.jsx)(eq,{})})]})},eJ=()=>{let{ory:e,env:t}=(0,X.x)(),{profileDialogMenu:s}=ev(),a=(0,u.c3)("Shared.Account.sidebar.dialog");return s!==ej.Profile?null:(0,l.jsxs)(eL,{title:a("profile"),children:[(0,l.jsx)(ez,{ory:e,oryApiUrl:t.NEXT_PUBLIC_ORY_API_URL}),(0,l.jsx)(e$,{}),(0,l.jsx)(eX,{}),(0,l.jsx)(eH,{})]})},eZ=()=>{let{trpc:{chat:e},app:t}=(0,X.x)(),s=(0,u.c3)("Shared.Account.chat.dangerZone"),a=e.useUtils(),r=(0,w.useRouter)(),n=e.chat.deleteAll.useMutation();return(0,l.jsxs)(j.lGe,{children:[(0,l.jsx)(j.zMO,{asChild:!0,children:(0,l.jsx)(I.$n,{className:"ms-auto",variant:"destructive",children:s("deleteChats.title")})}),(0,l.jsxs)(j.Cff,{children:[(0,l.jsx)(j.c75,{children:(0,l.jsx)(j.L33,{children:s("deleteChats.title")})}),(0,l.jsx)("div",{className:"text-muted",children:(0,l.jsx)("p",{children:s("deleteChats.dialogContentLine")})}),(0,l.jsx)(j.Esm,{children:(0,l.jsx)(I.$n,{variant:"destructive",onClick:()=>{n.mutate(void 0,{onSuccess:()=>{(0,h.oR)(s("deleteChats.toastSuccess")),a.chat.invalidate(),t===en.B.LE_CHAT_WEB&&r.replace("/chat")},onError:()=>{h.oR.error(s("deleteChats.toastError"))}})},isLoading:n.isPending,children:s("deleteChats.title")})})]})]})};function e0(){var e,t,s;let{trpc:{chat:a}}=(0,X.x)(),n=(0,u.c3)("Shared.Account.chat.privacy.flashAnswers"),i=a.useUtils(),o=es(r.OL.CHAT),c=(null==(e=o.data)?void 0:e.plan)===r._C.TEAM,d=a.organization.settings.useQuery(void 0,{enabled:c}),m=!c||(null==(t=d.data)?void 0:t.acceleratedAnswersEnabled),x=a.user.getAcceleratedAnswers.useQuery(),p=a.user.setAcceleratedAnswers.useMutation({onMutate:e=>{let{enabled:t}=e;return i.user.getAcceleratedAnswers.setData(void 0,t)},onSuccess:()=>(0,h.oR)(n("toastSuccess")),onError:()=>(0,h.oR)(n("toastError")),onSettled:()=>i.user.getAcceleratedAnswers.invalidate()}),f=o.isLoading||c&&d.isLoading||x.isLoading;return(0,l.jsx)(eV,{title:n("title"),description:n("description"),isLoading:f,children:(0,l.jsxs)(Y.m_,{open:!f&&!m&&void 0,children:[(0,l.jsx)(Y.k$,{asChild:!0,children:(0,l.jsx)("div",{children:(0,l.jsx)(eo.dO,{onCheckedChange:e=>{p.mutate({enabled:e})},checked:!!m&&null!=(s=x.data)&&s,isDisabled:f||!m})})}),(0,l.jsx)(Y.ZI,{children:n("disabledInfo",{enabled:"false"})})]})})}function e3(){var e,t;let{trpc:{chat:s}}=(0,X.x)(),a=(0,u.c3)("Shared.Account.chat.privacy.localisationConsent"),r=s.useUtils(),n=s.user.getLocalisationConsent.useQuery(),i=s.user.setLocalisationConsent.useMutation({onMutate:()=>{let e=r.user.getLocalisationConsent.getData();return r.user.getLocalisationConsent.setData(void 0,()=>{if(e)return{localisationEnabled:!e.localisationEnabled}}),{prevValue:e}},onSuccess:async()=>{await r.user.getLocalisationConsent.invalidate(),h.oR.success(a("changeSuccess"))},onError:(e,t,s)=>{r.user.getLocalisationConsent.setData(void 0,null==s?void 0:s.prevValue),h.oR.error(a("changeError"))}});return(0,l.jsx)(eV,{title:a("title"),description:a("description"),isLoading:n.isPending,children:(0,l.jsx)(eo.dO,{onCheckedChange:e=>i.mutate({consent:e}),checked:null!=(t=null==(e=n.data)?void 0:e.localisationEnabled)&&t,isDisabled:i.isPending||n.isPending})})}let e1=()=>{let e=e2(),{profileDialogMenu:t}=ev(),s=(0,u.c3)("Shared.Account.sidebar.dialog"),a=(0,u.c3)("Shared.Account.chat");return t!==ej.Chat?null:(0,l.jsxs)(eL,{title:s("chat"),children:[(0,l.jsxs)(eG,{title:a("privacy.title"),children:[e&&(0,l.jsx)(e0,{}),(0,l.jsx)(e3,{})]}),(0,l.jsx)(eG,{title:a("dangerZone.title"),children:(0,l.jsx)(eV,{title:a("dangerZone.deleteChats.title"),description:a("dangerZone.deleteChats.description"),children:(0,l.jsx)(eZ,{})})})]})},e2=()=>{let{extra:{userCountry:e}}=(0,X.x)(),{user:t}=eE();return"RU"!==e||t.is_le_chat_pro};var e4=s(64371),e6=s(46810),e5=s(3739);let e8={en:"English",fr:"Fran\xe7ais",de:"Deutsch",es:"Espa\xf1ol",pl:"Polski",it:"Italiano","pt-BR":"Portugu\xeas (Brasil)",ar:"",nl:"Nederlands"};function e7(e){let{locale:t}=e,s=(0,e5.Zd)(t)?t:e5.Xn,[r,n]=(0,a.useState)(s),{callDashboardFromClient:i,env:o}=(0,X.x)(),c=(0,w.useRouter)();return(0,l.jsxs)(j.l6P,{onValueChange:e=>{n(e),e6.A.set(e5.Q_,e,{path:"/",expires:31536e3,domain:".".concat(o.NEXT_PUBLIC_DOMAIN)}),i("/users/language_preference",{method:"POST",body:JSON.stringify({language_preference:e})}),c.refresh()},value:r,children:[(0,l.jsx)(j.bqE,{className:"w-40 font-semibold",children:(0,l.jsx)(j.yvm,{})}),(0,l.jsx)(j.gCo,{children:e5.YZ.map(e=>(0,l.jsx)(j.ebT,{value:e,children:e8[e]},e))})]})}var e9=s(37984),te=s(6152),tt=s(9243),ts=s(96904);let tl=[{Icon:te.A,theme:"light",labelKey:"switch_theme_light"},{Icon:tt.A,theme:"dark",labelKey:"switch_theme_dark"},{Icon:ts.A,theme:"system",labelKey:"switch_theme_system"}],ta=()=>{let e=(0,u.c3)("Shared.Account.preferences.general.theme"),{theme:t,setTheme:s}=(0,e9.D)();return(0,l.jsx)("div",{children:(0,l.jsxs)(j.l6P,{value:t,onValueChange:s,children:[(0,l.jsx)(j.bqE,{className:"w-40 font-semibold",children:(0,l.jsx)(j.yvm,{})}),(0,l.jsx)(j.gCo,{children:tl.map(t=>(0,l.jsx)(j.ebT,{value:t.theme,children:e(t.labelKey)},t.theme))})]})})},tr=()=>{let{app:e}=(0,X.x)(),{profileDialogMenu:t}=ev(),s=(0,u.c3)("Shared.Account"),a=(0,e4.Ym)();return t!==ej.Preferences?null:(0,l.jsxs)(eL,{title:s("sidebar.dialog.preferences"),children:[(0,l.jsx)(eG,{title:s("preferences.general.language.title"),description:s("preferences.general.language.description"),children:(0,l.jsx)(e7,{locale:a})}),e!==en.B.CONSOLE&&(0,l.jsx)(eG,{title:s("preferences.general.theme.title"),description:s("preferences.general.theme.description"),children:(0,l.jsx)(ta,{})})]})};var tn=s(79497);let ti=e=>{if("input"===e.attributes.node_type)return e.attributes.value},to={src:"/_next/static/media/apple.cd2606cb.svg",height:1e3,width:814,blurWidth:0,blurHeight:0},tc={src:"/_next/static/media/google.ed915ba8.svg",height:24,width:24,blurWidth:0,blurHeight:0},td={src:"/_next/static/media/microsoft.f7ac82b2.svg",height:23,width:23,blurWidth:0,blurHeight:0};function tu(e){let{settingsFlow:t,updateSecurity:s}=e,a=(0,u.c3)("Shared.Account.security.connectedAccounts"),r=t.ui.nodes.filter(e=>"input"===e.attributes.node_type&&"link"===e.attributes.name).map(ti),n=!r.includes("google"),i=!r.includes("microsoft"),o=!r.includes("apple");return(0,l.jsxs)(eG,{title:a("title"),description:a("description"),children:[(0,l.jsx)(eV,{title:"Google",children:(0,l.jsxs)(I.$n,{isDisabled:n,variant:"secondary",onClick:()=>{s({method:"oidc",link:"google"})},children:[(0,l.jsx)(tn.default,{src:tc,alt:"google logo",width:16,height:16,className:"me-2"}),a(n?"accountActive":"accountInactive")]})}),(0,l.jsx)(eV,{title:"Microsoft",children:(0,l.jsxs)(I.$n,{isDisabled:i,variant:"secondary",onClick:()=>{s({method:"oidc",link:"microsoft"})},children:[(0,l.jsx)(tn.default,{src:td,alt:"microsoft logo",width:16,height:16,className:"me-2"}),a(i?"accountActive":"accountInactive")]})}),(0,l.jsx)(eV,{title:"Apple",children:(0,l.jsxs)(I.$n,{isDisabled:o,variant:"secondary",onClick:()=>{s({method:"oidc",link:"apple"})},children:[(0,l.jsx)(tn.default,{src:to,alt:"apple logo",width:16,height:16,className:"me-2"}),a(o?"accountActive":"accountInactive")]})})]})}var tm=s(89615);let th=a.forwardRef((e,t)=>{let{className:s,type:a="info",...r}=e;return(0,l.jsx)("div",{ref:t,role:"status",className:(0,n.cn)(s,{"text-(--red-500)":"danger"===a}),...r})});th.displayName="Status";let tx=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("h5",{ref:t,className:(0,n.cn)("mb-2 text-sm font-medium",s),...a})});tx.displayName="StatusTitle";let tp=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",s),...a})});function tf(e){let{codes:t,className:s,updateSecurity:r}=e,n=(0,u.c3)("Shared.Account.security.2FA.recoveryCodes"),[i,o]=(0,a.useState)(!1),c=async()=>{await navigator.clipboard.writeText(t),(0,h.oR)(n("copiedCodes"))};return(0,l.jsxs)(th,{className:s,children:[(0,l.jsx)(tx,{children:n("codesInfoTitle")}),(0,l.jsxs)(tp,{children:[(0,l.jsxs)("div",{className:"bg-muted align-start flex items-start rounded-md p-2",children:[(0,l.jsx)("pre",{className:"text-wrap p-2 text-sm",children:t}),(0,l.jsx)(I.$n,{variant:"ghost",className:"ms-auto",onClick:c,children:(0,l.jsx)(tm.A,{className:"h-4 w-4"})})]}),(0,l.jsx)(I.$n,{className:"ms-auto mt-4",onClick:()=>{o(!0),r({method:"lookup_secret",lookup_secret_confirm:!0}),o(!1)},isLoading:i,children:n("codesConfirm")})]})]})}function tg(e){let{settingsFlow:t,updateSecurity:s}=e,r=(0,u.c3)("Shared.Account.security.2FA"),n=(0,a.useMemo)(()=>t.ui.nodes.filter(e=>"totp"===e.group).flatMap(e=>e.messages),[t]),[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[m,x]=(0,a.useState)(0),p=(0,a.useMemo)(()=>{var e,s;return null==(s=t.ui.nodes.find(e=>"img"===e.attributes.node_type&&"totp_qr"===e.attributes.id))||null==(e=s.attributes)?void 0:e.src},[t]),f=(0,a.useMemo)(()=>{var e,s;return null==(s=t.ui.nodes.find(e=>"text"===e.attributes.node_type&&"totp_secret_key"===e.attributes.id))||null==(e=s.attributes)?void 0:e.text.text},[t]),g=(0,a.useMemo)(()=>{var e,s;return null==(s=t.ui.nodes.find(e=>"text"===e.attributes.node_type&&"lookup_secret_codes"===e.attributes.id))||null==(e=s.attributes)?void 0:e.text.text},[t]),b=(0,a.useMemo)(()=>void 0!==t.ui.nodes.find(e=>"input"===e.attributes.node_type&&"lookup_secret_disable"===e.attributes.name),[t]),v=ei.Ik({totp_code:ei.Yj().min(1)}),_=(0,a.useMemo)(()=>{var e;return null==(e=t.ui.nodes.find(e=>"input"===e.attributes.node_type&&"totp_code"===e.attributes.name))?void 0:e.messages},[t]),N=(0,eF.mN)({defaultValues:{totp_code:""},resolver:(0,eD.u)(v)}),y=async()=>{f&&(await navigator.clipboard.writeText(f),(0,h.oR)(r("enable.copiedCode")))},E=async e=>{o(!0),await s({method:"totp",...e},{onSettled:()=>{o(!1)}})};return(0,l.jsxs)(eG,{title:r("title"),description:r("description"),children:[g&&(0,l.jsx)(tf,{className:"mb-8 w-full",codes:g,updateSecurity:s}),n.map((e,t)=>(0,l.jsx)(th,{className:"mb-4 w-full",type:"danger",children:(0,l.jsx)(tp,{children:e.text})},t)),p&&(0,l.jsx)(eV,{title:r("2FATitle"),children:(0,l.jsxs)(j.lGe,{onOpenChange:e=>{e||setTimeout(()=>{x(0)},100)},children:[(0,l.jsx)(j.zMO,{asChild:!0,children:(0,l.jsx)(I.$n,{className:"w-fit self-end",children:r("enable.title")})}),(0,l.jsxs)(j.Cff,{children:[(0,l.jsxs)(j.c75,{className:"mb-2 border-b pb-2",children:[(0,l.jsx)(j.L33,{children:r("enable.title")}),(0,l.jsx)(j.rrK,{children:r("enable.description")})]}),!m&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-4 flex flex-col border-b",children:[(0,l.jsx)("div",{className:"text-muted mb-4 text-sm",children:r("enable.scanQRPrompt")}),(0,l.jsx)(tn.default,{className:"me-auto pb-4",src:p,alt:"QR code",width:256,height:256})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("div",{className:"text-muted mb-4 text-sm",children:r("enable.addCodePrompt")}),(0,l.jsxs)("div",{className:"flex items-center bg-slate-100 ps-2 align-middle",children:[(0,l.jsx)("pre",{className:"text-(--neutral-500) text-sm",children:f}),(0,l.jsx)(I.$n,{variant:"ghost",mode:"icon-only",className:"ms-auto",onClick:y,icon:tm.A})]})]}),(0,l.jsx)(j.Esm,{children:(0,l.jsx)(I.$n,{onClick:()=>x(1),children:r("enable.next")})})]}),!!m&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("div",{className:"text-muted mb-6 text-sm",children:r("enable.enterAuthCodePrompt")}),(0,l.jsx)(j.lVW,{...N,children:(0,l.jsxs)("form",{className:"flex flex-col",onSubmit:N.handleSubmit(E),children:[(0,l.jsx)(j.zBI,{control:N.control,name:"totp_code",render:e=>{let{field:t}=e;return(0,l.jsxs)(j.eIh,{className:"mb-5",children:[(0,l.jsx)(j.lRv,{className:"mb-2",children:r("enable.2FACode")}),(0,l.jsx)(j.MJN,{children:(0,l.jsx)(j.pde,{type:"text",...t})}),(0,l.jsx)(j.C5h,{children:null==_?void 0:_.map((e,t)=>(0,l.jsx)("p",{children:e.text},t))})]})}}),(0,l.jsxs)("div",{className:"mt-4 flex",children:[(0,l.jsx)(I.$n,{className:"me-auto",variant:"soft",onClick:()=>x(0),isDisabled:i,children:r("enable.back")}),(0,l.jsx)(I.$n,{className:"ms-auto",type:"submit",isLoading:i,children:r("enable.title")})]})]})})]})})]})]})}),!p&&(0,l.jsxs)("div",{className:"flex w-full flex-col",children:[(!g||b)&&(0,l.jsx)(eV,{title:r("recoveryCodes.title"),className:"border-b pb-4",children:b?(0,l.jsx)(I.$n,{onClick:async()=>{d(!0),await s({method:"lookup_secret",lookup_secret_disable:!0},{onSettled:()=>{d(!1)}})},variant:"soft",isLoading:c,children:r("recoveryCodes.disable")}):(0,l.jsx)(I.$n,{onClick:async()=>{d(!0),await s({method:"lookup_secret",lookup_secret_regenerate:!0},{onSettled:()=>{d(!1)}})},variant:"primary",isLoading:c,children:r("recoveryCodes.enable")})}),(0,l.jsx)(eV,{title:r("2FATitle"),className:"mt-4",children:(0,l.jsxs)(j.lGe,{children:[(0,l.jsx)(j.zMO,{asChild:!0,children:(0,l.jsx)(I.$n,{className:"w-fit self-end",variant:"soft",children:r("disable.title")})}),(0,l.jsxs)(j.Cff,{children:[(0,l.jsx)(j.c75,{className:"mb-2 border-b pb-2 font-medium",children:r("disable.title")}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("div",{className:"text-muted mb-6 text-sm",children:r("disable.confirmPrompt")})}),(0,l.jsx)(j.Esm,{children:(0,l.jsx)(I.$n,{variant:"destructive",onClick:async()=>{o(!0),await s({method:"totp",totp_unlink:!0},{onSettled:()=>{o(!1)}})},isLoading:i,children:r("disable.title")})})]})]})})]})]})}function tj(e){let{settingsFlow:t,updateSecurity:s}=e,r=(0,u.c3)("Shared.Account.security.general"),n=(0,u.c3)("Shared.Account.security.general.password.dialog"),i=(0,a.useMemo)(()=>t.ui.nodes.filter(e=>"password"===e.group).flatMap(e=>e.messages),[t]),[o,c]=(0,a.useState)(i.length>0),[d,m]=(0,a.useState)(!1),h=ei.Ik({password:ei.Yj().min(8,n("errorTooShort"))}),x=(0,eF.mN)({defaultValues:{password:""},resolver:(0,eD.u)(h)}),p=(0,a.useCallback)(async e=>{c(!0);try{await s({method:"password",...e})}finally{c(!1)}},[s]);return(0,l.jsx)(eG,{title:r("title"),children:(0,l.jsx)(eV,{title:r("password.title"),description:r("password.description"),children:(0,l.jsxs)(j.lGe,{children:[(0,l.jsx)(j.zMO,{asChild:!0,children:(0,l.jsx)(I.$n,{className:"w-fit self-end",children:n("title")})}),(0,l.jsxs)(j.Cff,{children:[(0,l.jsxs)(j.c75,{children:[(0,l.jsx)(j.L33,{children:n("title")}),(0,l.jsx)(j.rrK,{children:r("password.description")})]}),i.map(e=>(0,l.jsx)(er.F,{state:eK(e.type),children:e.text},e.id)),(0,l.jsx)(j.lVW,{...x,children:(0,l.jsxs)("form",{className:"flex flex-col",onSubmit:x.handleSubmit(e=>p(e)),children:[(0,l.jsx)(j.zBI,{control:x.control,name:"password",render:e=>{let{field:t}=e;return(0,l.jsxs)(j.eIh,{className:"mb-5",children:[(0,l.jsx)(j.lRv,{className:"mb-2",children:n("input")}),(0,l.jsx)(j.MJN,{children:(0,l.jsx)(j.pde,{type:d?"text":"password",...t})}),(0,l.jsx)(j.C5h,{})]})}}),(0,l.jsxs)("div",{className:"mb-2 flex flex-row",children:[(0,l.jsx)(j.pde,{className:"me-2 h-fit w-fit",type:"checkbox",id:"showPassword",checked:d,onChange:()=>m(e=>!e)}),(0,l.jsx)(j.JU7,{htmlFor:"showPassword",children:n("showPassword")})]}),(0,l.jsx)(I.$n,{className:"ms-auto",type:"submit",isLoading:o,children:n("confirm")})]})})]})]})})})}function tb(){let{ory:e,env:t}=(0,X.x)(),s=(0,u.c3)("Shared.Account.security"),a=ep({ory:e,flowId:(0,w.useSearchParams)().get("flow")}).data,r=eU({ory:e,oryApiUrl:t.NEXT_PUBLIC_ORY_API_URL,settingsFlow:a});return void 0===a?(0,l.jsx)("div",{className:"h-[65vh]",children:(0,l.jsx)(j.c3d,{})}):null===a?(0,l.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,l.jsxs)("div",{className:"text-subtle my-12 flex max-w-xl flex-col items-center gap-3",children:[(0,l.jsx)(eM.A,{className:"size-10"}),(0,l.jsx)("div",{className:"text-center",children:s("ssoEnabled")})]})}):(0,l.jsxs)(l.Fragment,{children:[a.ui.messages&&a.ui.messages.length>0&&(0,l.jsx)("div",{className:"mt-4",children:a.ui.messages.map(e=>(0,l.jsx)(er.F,{state:eK(e.type),children:e.text},e.id))}),(0,l.jsx)(tj,{settingsFlow:a,updateSecurity:r.mutateAsync}),(0,l.jsx)(tg,{settingsFlow:a,updateSecurity:r.mutateAsync}),(0,l.jsx)(tu,{settingsFlow:a,updateSecurity:r.mutateAsync})]})}tp.displayName="StatusDescription";let tv=()=>{let{profileDialogMenu:e}=ev(),t=(0,u.c3)("Shared.Account");return e!==ej.Security?null:(0,l.jsx)(eL,{title:t("sidebar.dialog.security"),children:(0,l.jsx)(tb,{})})},t_=(0,n.cn)("h-full max-h-[82vh] w-full max-w-[52rem] overflow-hidden"),tN=e=>{let{user:t}=e;return(0,l.jsx)(eN,{user:t,children:(0,l.jsxs)(j.Cff,{className:(0,n.cn)("rounded-2xl! p-0 focus:outline-none",t_),children:[(0,l.jsx)(j.s6o,{children:(0,l.jsx)(j.L33,{children:"Profile"})}),(0,l.jsxs)("div",{className:(0,n.cn)("flex flex-col md:flex-row",t_),children:[(0,l.jsx)(eO,{}),(0,l.jsxs)("div",{className:"bg-subtle h-full w-full flex-1 overflow-hidden",children:[(0,l.jsx)(eJ,{}),(0,l.jsx)(tr,{}),(0,l.jsx)(tv,{}),(0,l.jsx)(e1,{})]})]})]})})};var ty=s(79647),tE=s(21404),tC=s(16289),tw=s(56340);let tS={light:"",dark:".dark"},tA=a.createContext(null);function tI(){let e=a.useContext(tA);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}a.forwardRef((e,t)=>{let{id:s,className:r,children:n,config:i,...o}=e,c=a.useId(),d="chart-".concat(s||c.replace(/:/g,"")),u=a.useMemo(()=>({config:i}),[i]);return(0,l.jsx)(tA.Provider,{value:u,children:(0,l.jsxs)("div",{"data-chart":d,ref:t,className:(0,tw.cn)("[&_.recharts-cartesian-axis-tick_text]:fill-(--text-muted) [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-surface]:outline-hidden flex justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-sector[stroke='#fff']]:stroke-transparent",r),...o,children:[(0,l.jsx)(tR,{id:d,config:i}),(0,l.jsx)(ty.u,{children:n})]})})}).displayName="Chart";let tR=e=>{let{id:t,config:s}=e,a=Object.entries(s).filter(e=>{let[t,s]=e;return s.theme||s.color});return a.length?(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(tS).map(e=>{let[s,l]=e;return"\n".concat(l," [data-chart=").concat(t,"] {\n").concat(a.map(e=>{var t;let[l,a]=e,r=(null==(t=a.theme)?void 0:t[s])||a.color;return r?"  --color-".concat(l,": ").concat(r,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};function tT(e,t,s){if("object"!=typeof t||null===t)return;let l="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,a=s;return s in t&&"string"==typeof t[s]?a=t[s]:l&&s in l&&"string"==typeof l[s]&&(a=l[s]),a in e?e[a]:e[s]}tE.m,a.forwardRef((e,t)=>{let{active:s,payload:r,className:n,indicator:i="dot",hideLabel:o=!1,hideIndicator:c=!1,label:d,labelFormatter:u,labelClassName:m,formatter:h,valueFormatter:x,bottomComment:p,color:f,nameKey:g,labelKey:j}=e,{config:b}=tI(),v=a.useMemo(()=>{var e;if(o||!(null==r?void 0:r.length))return null;let[t]=r,s="".concat(j||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"),a=tT(b,t,s),n=j||"string"!=typeof d?null==a?void 0:a.label:(null==(e=b[d])?void 0:e.label)||d;return u?(0,l.jsx)("div",{className:(0,tw.cn)("font-medium",m),children:u(n,r)}):n?(0,l.jsx)("div",{className:(0,tw.cn)("font-medium",m),children:n}):null},[d,u,r,o,m,b,j]);if(!s||!(null==r?void 0:r.length))return null;let _=1===r.length&&"dot"!==i;return(0,l.jsxs)("div",{ref:t,className:(0,tw.cn)("border-default/50 bg-default grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",n),children:[_?null:v,(0,l.jsxs)("div",{className:"grid gap-1.5",children:[r.map((e,t)=>{let s="".concat(g||e.name||e.dataKey||"value"),a=tT(b,e,s),r=f||e.payload.fill||e.color;return(0,l.jsx)("div",{className:(0,tw.cn)("[&>svg]:text-muted flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5","dot"===i&&"items-center"),children:h&&void 0!==e.value&&e.name?h(e.value,e.name,e,t,e.payload):(0,l.jsxs)(l.Fragment,{children:[(null==a?void 0:a.icon)?(0,l.jsx)(a.icon,{}):!c&&(0,l.jsx)("div",{className:(0,tw.cn)("border-(--color-border) bg-(--color-bg) shrink-0 rounded-[2px]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":_&&"dashed"===i}),style:{"--color-bg":r,"--color-border":r}}),(0,l.jsxs)("div",{className:(0,tw.cn)("flex flex-1 justify-between leading-none",_?"items-end":"items-center"),children:[(0,l.jsxs)("div",{className:"grid gap-1.5",children:[_?v:null,(0,l.jsx)("span",{className:"text-muted",children:(null==a?void 0:a.label)||e.name})]}),e.value&&(0,l.jsx)("span",{className:"text-default ms-2 font-mono font-medium tabular-nums",children:x?x(e.value,e.name):e.value.toLocaleString()})]})]})},e.dataKey)}),p&&(0,l.jsx)("div",{className:"text-muted text-xs",children:p})]})]})}).displayName="ChartTooltip",tC.s,a.forwardRef((e,t)=>{let{className:s,hideIcon:a=!1,payload:r,verticalAlign:n="bottom",nameKey:i}=e,{config:o}=tI();return(null==r?void 0:r.length)?(0,l.jsx)("div",{ref:t,className:(0,tw.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",s),children:r.map(e=>{let t=i||e.dataKey||"value",s=tT(o,e,t);return(0,l.jsxs)("div",{className:(0,tw.cn)("[&>svg]:text-muted flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3"),children:[(null==s?void 0:s.icon)&&!a?(0,l.jsx)(s.icon,{}):(0,l.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==s?void 0:s.label]},e.value)})}):null}).displayName="ChartLegend",s(14673);var tk=s(37640);tk.xL.GENERAL,tk.xL.API_KEYS,tk.xL.USAGE,tk.xL.MEMBERS,tk.xL.GENERAL,tk.xL.API_KEYS,tk.xL.USAGE,tk.xL.MEMBERS,tk.xL.NONE},88838:(e,t,s)=>{s.d(t,{BR:()=>l.B,_V:()=>a}),s(37640);var l=s(2403);l.B.CONSOLE,l.B.SETTINGS_MANAGER,l.B.LE_CHAT_WEB;class a extends Error{constructor(e,t){let{response:s}=t;super(e),this.name=this.constructor.name,this.response=s}}},94663:(e,t,s)=>{s.d(t,{L:()=>l});let l=e=>{for(let t of(e.use={},Object.keys(e.getState())))e.use[t]=()=>e(e=>e[t]);return e}}}]);