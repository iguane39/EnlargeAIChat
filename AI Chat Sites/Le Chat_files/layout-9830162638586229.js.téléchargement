try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7f951fd7-7d63-4f9b-9c9e-6ddc9a9664ea",e._sentryDebugIdIdentifier="sentry-dbid-7f951fd7-7d63-4f9b-9c9e-6ddc9a9664ea")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7627],{6270:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var r=n(93706),l=n(8380),a=n(51039),i=n(88544);function s(){let e=(0,r.c3)("Chat.files");return{getReferenceSourceDisplayName:(0,l.useCallback)(t=>{var n,r,l;if((0,i.a7)(t,t.metadata))return t.metadata?t.metadata.library_name:e("document_library.libraries");let s=(0,a.Ax)(t);return(l=null!=s?s:null)&&[a.Mv,a.kY,a.K2].includes(l)?null==s?void 0:s.toLocaleUpperCase():null!=(r=null!=s?s:null==(n=t.source)?void 0:n.toUpperCase())?r:""},[e])}}},15541:(e,t,n)=>{"use strict";n.d(t,{default:()=>D});var r=n(64784),l=n(24180),a=n(5936),i=n(6016),s=n(52614),o=n(93706),c=n(8380),u=n(83145),d=n(71222),f=n(8672),h=n(39343),m=n(21104),x=n(51039),p=n(32987),g=n(8424),v=n(84544),A=n(8866),w=n(9360),b=n(35111),j=n(9624),y=n(28008),C=n(30063),N=n(90907),_=n(17210),S=n(6270);let E=e=>{let{reference:t,snippetContent:n}=e,l=(0,o.c3)("Chat");return(0,r.jsxs)(r.Fragment,{children:[t.date&&(0,r.jsx)("span",{children:"".concat((0,_.Wo)(new Date(t.date),{format:"short",yesterdayTranslation:l("left_panel.yesterday")})," - ")}),n.hasPreviousContent&&(0,r.jsx)("span",{className:(0,y.M0)({variant:"hint"}),children:"[...] "}),(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:n.text}}),n.hasNextContent&&(0,r.jsx)("span",{className:(0,y.M0)({variant:"hint"}),children:" [...]"})]})},I=e=>{var t;let{reference:n,handleClick:l,children:a}=e,i=(0,x.Ax)(n),{getReferenceSourceDisplayName:s}=(0,S.$)(),o=n.url&&n.source!==x.Mv,c=null!=(t=(0,x.vH)(n))?t:void 0,u=o&&c?"a":"div";return(0,r.jsxs)(u,{...o?{href:c,target:"_blank"}:{},onClick:n.source===x.Mv?void 0:l,className:(0,C.cn)("group/header flex flex-col gap-1 rounded-xl px-2 py-3",o?"hover:bg-muted":"",n.source===x.Mv?"select-none":""),children:[(0,r.jsxs)("div",{className:(0,C.cn)("flex w-full items-center justify-between gap-3"),children:[(0,r.jsxs)("div",{className:(0,C.cn)("flex grow flex-row-reverse items-center gap-2 overflow-hidden"),children:[i&&(0,r.jsx)(N.A,{height:20,width:20,hostname:i,className:"size-5"}),(0,r.jsx)("div",{className:(0,C.cn)("grow truncate text-end text-xs leading-4 font-medium text-subtle",o?"group-hover/header:text-default":""),children:s(n)})]}),i&&o&&(0,r.jsx)(j.A,{className:"size-4 text-icon-default-muted group-hover/header:text-icon-default"})]}),(0,r.jsx)(y.LJ,{className:(0,C.cn)("cursor-pointer leading-5 font-semibold text-ellipsis hover:underline",o?"group-hover/header:underline":"hover:underline",n.source===x.Mv?"":"group-hover/header:underline"),size:"sm",weight:"medium",variant:"default",onClick:n.source===x.Mv?l:void 0,children:n.title}),a]})};function k(e){let{reference:t,snippetContent:n,handleClick:l,multipleReferenceIndexes:a}=e;return null===n?null:(0,r.jsx)(I,{reference:t,handleClick:l,multipleReferenceIndexes:a,children:n.text&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("p",{className:(0,C.cn)("line-clamp-3 overflow-hidden pt-1 pb-0 text-sm leading-5.5 text-muted select-text",t.source===x.Mv?"select-none":""),children:(0,r.jsx)(E,{reference:t,snippetContent:n})})})})}function D(){var e;let t=(0,o.c3)("Chat"),{trackMessageEvent:n}=(0,A.n)(),j=w.P.use.referencesPanelMsgData(),[y,C]=(0,c.useState)(null),[N,_]=(0,c.useState)(null);(0,p.E)("esc",()=>{C(!1)},{preventDefault:!0,isDisabled:!1===y});let[S,E]=(0,c.useState)(!1),[I,D]=(0,c.useState)({}),M=b.api.reference.getAFPArticle.useMutation({onSuccess:e=>{D(t=>({...t,html:e,status:{name:"loaded"}}))},onError:e=>{D(t=>{var n;return{...t,status:{name:"error",code:null==(n=e.data)?void 0:n.code}}})}});(0,c.useEffect)(()=>{C(e=>!(!e||(0,d.H)(N,j))||!(0,f.u)(e)&&!!j&&!e)},[j,_,C]);let P=(0,l.useQuery)({queryKey:["references",null==j?void 0:j.id],queryFn:async()=>{if(!j)return C(!1),[];let e=(0,m.yY)(j.contentChunks,j.references),t=[];return j.contentChunks?Promise.all(j.contentChunks.map(async(n,r)=>{if("reference"===n.type)return await Promise.all(n.referenceIds.map(async n=>{let{reference:l,refIndex:a}=(0,h.t3)(j.references,n.toString());if(!l||t.map(e=>e.id).includes(l.id))return;let i=await (0,m.DB)(l,e,r);return{...l,content:i.text,index:a}}))})).then(e=>e.filter(Boolean).flat(1)):[]}});return(0,r.jsxs)(r.Fragment,{children:[y&&(0,r.jsx)("div",{className:"absolute start-0 end-0 top-0 bottom-0 z-45 flex h-full bg-overlay md:hidden",onClick:()=>C(!1)}),(0,r.jsx)(a.N,{children:y&&(0,r.jsx)(i.P.div,{initial:{width:0,insetInlineEnd:"-320px"},animate:{width:"320px",insetInlineEnd:0},exit:{width:0,insetInlineEnd:"-320px"},transition:{duration:.3,ease:"easeInOut"},className:"absolute top-0 bottom-0 z-45 border-s border-default md:relative",children:(0,r.jsxs)("div",{className:"relative flex h-full w-80 flex-col bg-subtle py-2 ps-2",children:[(0,r.jsxs)("div",{className:"flex items-center py-1 ps-3",children:[(0,r.jsx)("div",{className:"text-xl font-semibold text-default",children:t("references_panel.panel_title")}),(0,r.jsx)(g.$nd,{size:"sm",variant:"ghost",className:"ms-auto px-2.5",onClick:()=>C(!1),children:(0,r.jsx)(s.A,{className:"size-5"})})]}),(0,r.jsxs)(g.FKN,{children:[(0,r.jsx)(g.$H1,{dir:"vertical"}),(0,r.jsx)("div",{className:"mb-4 h-full overflow-y-auto ps-1 pe-2",children:(null!=(e=P.data)?e:[]).reduce((e,t)=>{if(!t)return e;let n=e.find(e=>e.id===t.id&&e.source===t.source&&e.title===t.title&&e.content===t.content);return n&&t.index?(n.aggregatedIndexes.push(t.index),n.aggregatedIndexes=(0,u.A)(n.aggregatedIndexes)):e.push({...t,aggregatedIndexes:t.index?[t.index]:[]}),e},[]).map((e,t)=>(0,r.jsx)(k,{reference:e,snippetContent:{text:e.content},handleClick:()=>(e=>{if(e.source===x.Mv){var t;M.mutate({articleId:null!=(t=e.url)?t:"",messageData:j}),E(!0),D(t=>{var n;return{...t,status:{name:"loading"},title:e.title,date:null!=(n=e.date)?n:""}})}else n(A.f.REFERENCE_CLICKED,{chat_id:null==j?void 0:j.chatId,message_id:null==j?void 0:j.id,message_version:null==j?void 0:j.version,reference_url:e.url,reference_source:e.source,answer_id:null==j?void 0:j.id,answer_version:null==j?void 0:j.version})})(e),multipleReferenceIndexes:e.aggregatedIndexes},"ref-".concat(t,"-").concat(e.id,"-").concat(e.source,"-").concat(e.title)))})]})]})})}),(0,r.jsx)(v.A,{article:I,isOpen:S,handleDialogOpenChange:E})]})}},17210:(e,t,n)=>{"use strict";function r(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function l(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:"long",yesterdayTranslation:null},n=new Date,l=e.toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"}),a=e.toLocaleDateString(void 0,{day:"2-digit",month:"2-digit"}),i=e.toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"});if(r(n,e))return l;let s=new Date;s.setDate(n.getDate()-1);let{format:o,yesterdayTranslation:c}=t;return r(s,e)&&c?"long"===o?"".concat(c,", ").concat(l):c:n.getFullYear()===e.getFullYear()?"long"===o?"".concat(a," ").concat(l):i:i+("long"===o?" ".concat(l):"")}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{locale:navigator.language,yesterdayTranslation:null,format:"relative"},n=new Date(e),r=l(new Date),a=new Date(r);a.setDate(r.getDate()-1);let i=l(n),s=i.getTime()===r.getTime(),o=i.getTime()===a.getTime(),{format:c,locale:u,yesterdayTranslation:d}=t,f=new Intl.DateTimeFormat(u,{hour:"numeric",minute:"2-digit"}),h=new Intl.DateTimeFormat(u,{month:"short",day:"numeric"}),m=f.format(n);/AM|PM/i.test(m)&&(m=m.replace(/\s?(AM|PM)/i,(e,t)=>t.toLowerCase()));let x="".concat(h.format(n),", ").concat(m);return"long"===c?x:s?m:o&&d?"".concat(d," ").concat(m):x}function s(e){let t=Math.floor(e/6e4),n=Math.floor(e%6e4/100)/10;return 0===t?"".concat(n.toString(),"s"):"".concat(t,"min ").concat(n.toString(),"s")}n.d(t,{Wo:()=>a,fU:()=>s,tI:()=>i})},21104:(e,t,n)=>{"use strict";n.d(t,{DB:()=>c,yY:()=>u});var r=n(33152),l=n(8672),a=n(51039);let i=["!",".","?","։","؟","۔","܀","܁","܂","߹","।","॥","၊","။","።","፧","፨","᙮","᜵","᜶","᠃","᠉","᥄","᥅","᪨","᪩","᪪","᪫","᭚","᭛","᭞","᭟","᰻","᰼","᱾","᱿","‼","‽","⁇","⁈","⁉","⸮","⸼","꓿","꘎","꘏","꛳","꛷","꡶","꡷","꣎","꣏","꤯","꧈","꧉","꩝","꩞","꩟","꫰","꫱","꯫","﹒","﹖","﹗","！","．","？","\uD802\uDE56","\uD802\uDE57","\uD804\uDC47","\uD804\uDC48","\uD804\uDCBE","\uD804\uDCBF","\uD804\uDCC0","\uD804\uDCC1","\uD804\uDD41","\uD804\uDD42","\uD804\uDD43","\uD804\uDDC5","\uD804\uDDC6","\uD804\uDDCD","\uD804\uDDDE","\uD804\uDDDF","\uD804\uDE38","\uD804\uDE39","\uD804\uDE3B","\uD804\uDE3C","\uD804\uDEA9","\uD805\uDC4B","\uD805\uDC4C","\uD805\uDDC2","\uD805\uDDC3","\uD805\uDDC9","\uD805\uDDCA","\uD805\uDDCB","\uD805\uDDCC","\uD805\uDDCD","\uD805\uDDCE","\uD805\uDDCF","\uD805\uDDD0","\uD805\uDDD1","\uD805\uDDD2","\uD805\uDDD3","\uD805\uDDD4","\uD805\uDDD5","\uD805\uDDD6","\uD805\uDDD7","\uD805\uDE41","\uD805\uDE42","\uD805\uDF3C","\uD805\uDF3D","\uD805\uDF3E","\uD806\uDE42","\uD806\uDE43","\uD806\uDE9B","\uD806\uDE9C","\uD807\uDC41","\uD807\uDC42","\uD81A\uDE6E","\uD81A\uDE6F","\uD81A\uDEF5","\uD81A\uDF37","\uD81A\uDF38","\uD81A\uDF44","\uD82F\uDC9F","\uD836\uDE88","｡","。"];function s(e,t){var n,r,l;let a=function(e){let t=i.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|");return e.split(new RegExp("(".concat(t,")")))}(e),s=[],o=0;for(;o<a.length;){let e=a[o];if(!(null==e?void 0:e.trim())||i.includes(e)){o+=1;continue}let r=e,l=r.split(/\s+/).filter(e=>e.trim()).length;if(o+1<a.length&&i.includes(a[o+1])&&(r+=a[o+1],o+=1),l<=t){for(let e=0;e<s.length;e++){let[a,i]=null!=(n=s[e])?n:[];if(!a||!i)throw Error("Error while processing reference extract : empty span / length element.");l+i<=t&&(s[e]=[a+r,i+l])}s.push([r,l])}else{let e=function(e,t){let n=e.split(/(\s+)/),r="",l=0;for(let e of n)if(e.trim()&&(l+=1),r+=e,l>=t)break;return r}(r,t);s.push([e,t])}o+=1}for(let e=s.length-1;e>0;e--){let t=e-1,[n]=null!=(r=s[e])?r:[],[a]=null!=(l=s[t])?l:[];if(!n||!a)throw Error("Error while processing reference extract : empty span pair.");if(a.includes(n)){s.splice(e,1);continue}}return s.map(e=>{let[t]=e;return t.trim()})}async function o(e,t){let[n]=await (0,r.v7)(e,t,{processor:e=>e.trim().toLowerCase(),limit:1});if(!n)throw Error("Error while processing reference extract : empty fuzzball extract.");return{textChoice:n[0],score:n[1],extractIndex:n[2]}}let c=async(e,t,n)=>{if(!e||(0,l.u)(n)||e.source===a.ip)return{text:""};if(e.snippets&&e.snippets.length>0)try{let r=t[n];if(void 0===r)return{text:e.snippets.join(" ")};let l=function(e,t){let n=e.snippets;if(!n)return[];let r=function(e){e.sort((e,t)=>t.length-e.length);let t=[];for(let n of e){let e=!1;for(let r of t)if(r.includes(n)){e=!0;break}e||t.push(n)}return t}(n);if(!r.length)return[];let l=[];for(let e of r)l.push(...s(e,80));return[...new Set(l)]}(e,0),a=await o(r,l);return{text:a.textChoice,hasPreviousContent:l.length>1&&a.extractIndex>0,hasNextContent:l.length>1&&a.extractIndex<l.length-1}}catch(t){return{text:e.snippets.join(" ")}}if(e.content)try{let r=t[n];if(void 0!==r){let t=s(e.content,80),n=await o(r,t);return{text:n.textChoice,hasPreviousContent:t.length>1&&n.extractIndex>0,hasNextContent:t.length>1&&n.extractIndex<t.length-1}}}catch(e){}return e.description?{text:e.description}:{text:""}};function u(e,t){let n,r={};return t&&e?(e.forEach((e,t)=>{"text"===e.type&&e.text.length>0?n=e.text.slice(-80):"reference"===e.type?r[t]=n:n=void 0}),r):r}},23964:(e,t,n)=>{"use strict";n.d(t,{CanvaProvider:()=>f,o:()=>d});var r=n(64784),l=n(8380),a=n(38256),i=n(9360),s=n(35111),o=n(63123),c=n(86130);let u=(0,l.createContext)(void 0),d=()=>{let e=(0,l.useContext)(u);if(!e)throw Error("useCanvaContext must be used within a CanvaProvider");return e},f=e=>{var t,n;let{children:d}=e,[f,h]=(0,l.useState)([]),[m,x]=(0,l.useState)(null),[p,g]=(0,l.useState)(),[v,A]=(0,l.useState)(null),[w,b]=(0,l.useState)([]),[j,y]=(0,l.useState)([]),[C,N]=(0,l.useState)(null),[_,S]=(0,l.useState)(!1),[E,I]=(0,l.useState)(!1),k=(0,a.w)(),D=null!=(t=null==k?void 0:k.session)?t:null,M=(0,l.useRef)(()=>{}),P=(0,l.useCallback)(e=>{M.current=e},[]),L=i.P.use.isGeneratingByChatId(),T=!!p&&null!=(n=L[p])&&n,[R,U]=(0,l.useState)(void 0),Y=(0,l.useCallback)(e=>{U(()=>e)},[]),F=(0,l.useCallback)(e=>{e&&(h(f.filter(t=>t.id!==e.id)),(null==m?void 0:m.id)===e.id&&x(null))},[f,h,m,x]),O=(0,l.useCallback)(e=>{x(e),A(null),e&&h(t=>{var n;return[...t.filter(t=>t.id!==e.id),{id:e.id,version:e.version,chatId:e.chatId,title:null!=(n=e.title)?n:"",type:e.type}]})},[]);(0,l.useEffect)(()=>{let e=[...w,...C?[C]:[]].map(e=>e.id);h(t=>t.filter(t=>e.includes(t.id)))},[w,h,C]);let z=(0,l.useMemo)(()=>f.filter(e=>e.chatId===p||!p&&""===e.chatId),[f,p]),H=(0,l.useCallback)(()=>{C&&(N(null),x(null),I(!1))},[C,N,x,I]),B=(0,l.useCallback)(()=>{(null==m?void 0:m.id)===(null==C?void 0:C.id)?O(null):C&&O(C)},[m,C,O]),V=s.api.canva.getMetadata.useMutation(),W=(0,l.useCallback)(async e=>{var t,n;let{inferedCanvaEditorType:r,content:l,onCleanValue:a,onToggleFeature:i}=e;if(!(null==D?void 0:D.organization.featureFlags["feathers-mcgraw"])||(C||O(null),!r))return;let s=(e=>{let{text:t,type:n,chatId:r}=e;return{id:(0,o.A)(),status:"temporary",role:c.gg.USER,version:0,identifier:"temp",type:n,turn:0,parentId:null,parentVersion:null,messageId:null,messageVersion:null,order:0,content:t,options:{},title:null,createdAt:new Date,createdById:"",chatId:null!=r?r:""}})({text:l,type:"code"===r?"code":"text/markdown",chatId:p});N(s),O(s),null==a||a(),I(!0),i();let u=w.map(e=>e.identifier).filter((e,t,n)=>n.indexOf(e)===t),d=await V.mutateAsync({baseType:r,content:l,alreadyUsedIdentifiers:u}),f={...s,title:d.title,identifier:null!=(t=d.identifier)?t:s.identifier,type:null!=(n=d.type)?n:s.type,options:d.options||{}};N(f),O(f),I(!1)},[N,C,V,O,p,I,D,w]),K=(0,l.useMemo)(()=>({removeCanvaTab:F,displayedCanvaTab:z,setOpenCanva:O,openCanva:m,setChatId:g,canvas:w,setCanvas:b,messagesBase:j,setMessagesBase:y,isReadOnly:_,setIsReadOnly:S,isGenerating:T,getHandleSubmit:()=>M.current,onStop:R,setHandleSubmit:P,setOnStop:Y,tempCanva:C,setTempCanva:N,session:D,setQuote:A,quote:v,isGeneratingMetadata:E,setIsGeneratingMetadata:I,deleteTemparyCanva:H,toggleTempCanva:B,createTemporaryCanva:W}),[F,z,O,m,g,w,b,j,y,_,S,T,M,R,P,Y,C,N,D,A,v,E,I,H,B,W]);return(0,r.jsx)(u.Provider,{value:K,children:d})}},38256:(e,t,n)=>{"use strict";n.d(t,{SessionProvider:()=>i,d:()=>o,w:()=>s});var r=n(64784),l=n(8380);let a=(0,l.createContext)(void 0),i=e=>{let{children:t,session:n}=e,[i,s]=(0,l.useState)(n);(0,l.useEffect)(()=>{s(n)},[n]);let o=(0,l.useMemo)(()=>({session:i,setSession:e=>i?s({...i,...e}):null}),[i,s]);return(0,r.jsx)(a.Provider,{value:o,children:t})},s=()=>{let e=(0,l.useContext)(a);if(void 0===e)throw Error("useSession must be used within a SessionProvider");let t=e.session;return null===t?null:{...e,session:t}},o=()=>{let e=(0,l.useContext)(a);if(void 0===e)throw Error("useSession must be used within a SessionProvider");let t=e.session;if(null===t)throw Error("useAuthenticatedSession must be used within a logged in only component");return{...e,session:t}}},39343:(e,t,n)=>{"use strict";n.d(t,{GR:()=>c,LT:()=>d,dX:()=>s,kD:()=>i,t3:()=>a});var r=n(74032),l=n(6790);let a=(e,t)=>{if(null===t||!e)return{};let n=(0,r.p)(e,e=>e.id.toString()),l=n.findIndex(e=>e.id.toString()===t.toString()),a=n[l];return a?{reference:a,refIndex:l}:{}};function i(e){let{contentChunkIndex:t,referenceIds:n}=e;return":".concat("refs","[").concat(t,"-").concat(n.join(","),"]")}function s(e){let[t,n]=e.split("-"),r=Number(t),l=null==n?void 0:n.split(",");return l&&r?{contentChunkIndex:r,referenceIds:l}:null}function o(e){return null===e?"":e.replace(/[&<>'"|]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","|":"&verbar;"})[e]||e)}function c(e){return":".concat("tool_references","[references]{").concat(e.flatMap((e,t)=>{let{description:n,favicon:r,title:l,url:a}=e;return["ref_".concat(t,"_url='").concat(o(a),"'"),"ref_".concat(t,"_title='").concat(o(l),"'"),"ref_".concat(t,"_favicon='").concat(o(r),"'"),"ref_".concat(t,"_description='").concat(o(n),"'")]}).join(" "),"}")}let u=RegExp("ref_(?<referenceIndex>\\d+)_(?<data>url|title|favicon|description)");function d(e){let t=[];return(0,l.u)(e,(e,n)=>{var r;let l=null==(r=u.exec(n))?void 0:r.groups;if(!l)return;let a=Number(l.referenceIndex);void 0===t[a]&&(t[a]={}),t[a][l.data]=e}),t}},51039:(e,t,n)=>{"use strict";n.d(t,{Ax:()=>d,K2:()=>i,L5:()=>c,Mv:()=>l,gK:()=>o,ip:()=>s,kY:()=>a,vH:()=>f,zd:()=>u});var r=n(88544);let l="afp",a="ap",i="memories",s="tako",o="library_search",c=[l,a,i,o];function u(e){if(!e)return null;try{let{hostname:t}=new URL(e);return t.startsWith("www.")?t.slice(4):t}catch(e){return null}}function d(e){var t;return[l,i,o].includes(null!=(t=null==e?void 0:e.source)?t:"")?null==e?void 0:e.source:u(f(e))}function f(e){var t;if(!e)return null;if((0,r.a7)(e,e.metadata)){if(e.metadata){let t=e.url;return t?"/libraries/".concat(e.metadata.library_id,"?document=").concat(t):"/libraries/".concat(e.metadata.library_id)}return"/libraries"}if([l,i].includes(null!=(t=e.source)?t:""))return null;if(e.metadata&&"string"==typeof e.metadata.canonical_link)return e.metadata.canonical_link;if(e.url)try{return new URL(e.url),e.url}catch(e){}return null}},57743:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r={src:"/_next/static/media/afp.689d6266.png",height:80,width:80,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAALVBMVEUxWf8wWP80XP8+Zf9MaXEzXf8xWv8zWv81Xv8uWP+nuP94k/+TqP+9yv9Qcv8UGvsLAAAACHRSTlP3Lu3+ALC0tAnuCWoAAAAJcEhZcwAALEsAACxLAaU9lqkAAAA5SURBVHicHctBEsAgCATBQcAsqPn/c1Px3k3YhMcCG6rSMFLI3RPe091nwO5ee0E6Kiov1o9vnxYfL5wBUe5Yle0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},84544:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(64784),l=n(47765),a=n(21917),i=n(79497),s=n(93706),o=n(8424);function c(e){let{nbLines:t=5}=e;return(0,r.jsxs)("div",{className:"flex w-full flex-col items-start space-y-4",children:[t&&Array.from({length:t-1}).map((e,t)=>(0,r.jsx)(o.EAD,{className:"h-5 w-full"},t)),(0,r.jsx)(o.EAD,{className:"h-5 w-2/3"})]})}var u=n(57743),d=n(17210);function f(e){let{errorCode:t}=e,n=(0,s.c3)("Chat"),i="TOO_MANY_REQUESTS"===t?"rateLimitReached":"default",c="TOO_MANY_REQUESTS"===t?l.A:a.A;return(0,r.jsx)(o.FcD,{children:(0,r.jsx)("div",{className:"flex w-full flex-row items-start gap-4",children:(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsxs)("div",{className:"flex w-full flex-row gap-2",children:[(0,r.jsx)(c,{className:"h-4 min-h-4 w-4 min-w-4"}),(0,r.jsx)(o.XL1,{children:n("afp_reference_dialog.errors.".concat(i,".title"))})]}),(0,r.jsx)(o.TND,{className:"ps-6 whitespace-break-spaces text-muted",children:n("afp_reference_dialog.errors.".concat(i,".description"))})]})})})}function h(e){var t,n,l;let{article:a,handleDialogOpenChange:h,isOpen:m}=e,x=(0,s.c3)("Chat");return(0,r.jsx)(o.lGe,{open:m,onOpenChange:h,children:(0,r.jsxs)(o.Cff,{className:"w-3xl max-w-3xl overflow-hidden px-4 select-none sm:px-9",children:[(0,r.jsx)(o.c75,{className:"justify-between py-1",children:(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(i.default,{src:u.A,alt:"favicon",className:"me-4 max-h-[50px] shrink-0 items-center rounded-full",width:50,height:50}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)(o.L33,{className:"line-clamp-2 text-lg font-semibold text-default",children:null==a?void 0:a.title}),(0,r.jsx)(o.rrK,{className:"pt-2 whitespace-break-spaces",children:"".concat(x("afp_reference_dialog.published_date")).concat((null==a?void 0:a.date)?(0,d.Wo)(new Date(a.date),{format:"short",yesterdayTranslation:x("left_panel.yesterday")}):"")})]})]})}),(0,r.jsxs)(o.FKN,{className:"relative -me-3 h-96 pe-5",children:[(null==a||null==(t=a.status)?void 0:t.name)==="loaded"&&(0,r.jsx)("div",{className:"article-content",dangerouslySetInnerHTML:{__html:a.html||""}}),(null==a||null==(n=a.status)?void 0:n.name)==="loading"&&(0,r.jsx)(c,{nbLines:8}),(null==a||null==(l=a.status)?void 0:l.name)==="error"&&(0,r.jsx)(f,{errorCode:a.status.code}),(0,r.jsx)(o.$H1,{dir:"vertical"}),(0,r.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 h-1 bg-linear-to-b from-default to-transparent"}),(0,r.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-4 bg-linear-to-t from-default to-transparent"})]})]})})}},88544:(e,t,n)=>{"use strict";n.d(t,{a7:()=>a});var r=n(1883);let l=r.Ik({rank:r.ai().optional(),title:r.Yj(),url:r.Yj().nullable().optional(),description:r.Yj().nullable().optional(),snippets:r.YO(r.Yj()).optional(),date:r.Yj().nullable().optional(),content:r.Yj().optional(),can_open:r.zM().optional(),content_type:r.Yj().optional(),source:r.Yj().optional(),metadata:r.g1(r.Yj(),r.L5()).optional()});r.g1(r.Yj(),l);let a=(e,t)=>"library_search"===e.source},89528:(e,t,n)=>{Promise.resolve().then(n.bind(n,23964)),Promise.resolve().then(n.bind(n,75747)),Promise.resolve().then(n.bind(n,15541)),Promise.resolve().then(n.bind(n,6343))},90907:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(64784),l=n(3905),a=n(23118),i=n(79497),s=n(8380),o=n(51039),c=n(8424),u=n(30063),d=n(57743);let f={src:"/_next/static/media/ap.75b233e8.png",height:192,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAARVBMVEX////6+vouLi7t7e1nZmbx8fHn5+f////+WlfExMT/WVfc3Nw6OjoDAwNsbGzg4OB5eXl1dXVOTk62trZ7e3upqamlpqZn/0q1AAAAEXRSTlP//f11/v79df7+dfv7+/t1+055rGMAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA+SURBVHicHcpJFoAgDATRDiS0wQEZ9P5H9Zm/qkWBCASxS/E/7Jz90Aw+afVrNFA1jduI7OZviVkAAVG3UD890gHKwUSpgAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8};function h(e){let{hostname:t,height:n,width:h,className:m}=e,[x,p]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!0);return(0,r.jsxs)(r.Fragment,{children:[t===o.gK&&(0,r.jsx)(l.A,{className:(0,u.cn)("m-0 h-full w-full p-[1px] text-default","rounded-full border-1 border-default bg-card","max-h-5 max-w-5",m),strokeWidth:2,height:n,width:h}),t===o.Mv&&(0,r.jsx)(i.default,{src:d.A,alt:"favicon",className:(0,u.cn)("mx-0 rounded-full border-1 border-default",m),width:h,height:n}),t===o.kY&&(0,r.jsx)(i.default,{src:f,alt:"favicon",className:(0,u.cn)("mx-0 rounded-full border-1 border-default",m),width:h,height:n}),t===o.K2&&(0,r.jsx)("span",{className:"flex items-center justify-center rounded-full p-0.5",style:{width:h,height:n},children:(0,r.jsx)(a.A,{})}),!x&&!o.L5.includes(t)&&(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsx)(c.EAD,{className:"h-[18px] w-[18px] rounded-full"}),(0,r.jsx)(i.default,{src:"https://www.google.com/s2/favicons?domain=".concat(t,"&sz=256"),alt:"",className:(0,u.cn)("rounded-full border-1 border-default bg-(--secondary-200) object-cover",g&&"absolute opacity-0","shrink-0",m),width:h,height:n,onError:()=>p(!0),onLoad:()=>{v(!1),p(!1)}})]})]})}}},e=>{e.O(0,[1716,7795,4989,1318,4960,4458,3929,3706,9326,1526,1948,3573,7202,8424,6974,7513,5747,3597,988,7358],()=>e(e.s=89528)),_N_E=e.O()}]);