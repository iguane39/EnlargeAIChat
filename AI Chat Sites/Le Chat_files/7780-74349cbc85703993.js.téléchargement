try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a3fa7c4c-f7e7-4eba-89e6-2d7adb2b137d",e._sentryDebugIdIdentifier="sentry-dbid-a3fa7c4c-f7e7-4eba-89e6-2d7adb2b137d")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7780],{478:(e,t,i)=>{i.d(t,{f:()=>_});var a=i(64784),n=i(64371),s=i(93706),r=i(8380),l=i(30817),o=i(32750),d=i(8424),c=i(4970),u=i(25576),h=i(8866),g=i(35111),m=i(38534);let _=e=>{let{children:t,integration:i,open:_,setIsOpen:p,redirectUrl:b}=e,v=(0,n.Ym)(),E=(0,l.ad)(v)?v:l.rc.en,f=(e=>{let t=(0,s.c3)("Chat");return(0,o.cC)(e.dbName,t)})(i),x=(e=>{let t=(0,s.c3)("Chat");return(0,o.Es)(e,t)})(i.dbName),{fetchLink:C,isFetchingAuthUrl:I,connectionStarted:y,isError:N}=(e=>{let{integration:t,redirectUrl:i}=e,{track:a}=(0,h.n)(),{mutate:n,isPending:s,isError:l}=g.api.integrations.getAuthUrl.useMutation({onMutate:e=>{e.isReconnect?a(h.f.INTEGRATIONS_RECONNECT,{integrationId:e.integrationId,integrationName:t.name}):a(h.f.INTEGRATIONS_CONNECT,{integrationId:e.integrationId,integrationName:t.name})}}),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null);return{fetchLink:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c?window.open(c,"_blank","noopener,noreferrer"):n({integrationId:t.id,appUrl:null!=i?i:window.location.href,isReconnect:e},{onSuccess:e=>{u(e.auth_url),d(!0),window.location.href=e.auth_url}})},isFetchingAuthUrl:s,connectionStarted:o,isError:l}})({integration:i,redirectUrl:b}),[S,T]=(0,r.useState)((0,o.FM)(i)?[{label:"Token",value:"",key:"t_auth_token"}]:[]),A=g.api.useUtils(),R=g.api.integrations.updateIntegrationData.useMutation(),O=async()=>{if(i.isHTTPAuth)try{var e;await R.mutateAsync({integrationId:i.id,configType:"userSecrets",data:{t_auth_token:(null==(e=S.at(0))?void 0:e.value)||""},activate:!0}),d.oRP.success("Updated connection token and connected"),null==p||p(!1),A.integrations.connectorIntegrations.invalidate()}catch(e){d.oRP.error("Failed to update connection token")}},L=(0,s.c3)("Chat"),D=(0,s.c3)("Connections"),w={title:L("integrations.connection.privacy_disclaimer.title"),description:L("integrations.connection.privacy_disclaimer.description")},M=N||R.error?{title:L("integrations.connection.connection_error.title"),description:L("integrations.connection.connection_error.description")}:void 0,{addDefaultIntegration:j,isLoading:k}=(0,u.A)(),P=c.Lk[i.dbName];return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(d.JIG,{integrationName:i.name[E],description:null!=x?x:i.description[E],fetchLink:e=>{j(i.id),C(e)},iconSrc:i.iconUrl,promptExamples:f,connectionStarted:y,isLoading:I||k,saveLabel:L("integrations.connection.save"),connectLabel:L("integrations.connection.connect"),connectedLabel:L("integrations.connection.connected"),reconnectLabel:L("integrations.connection.reconnect"),overviewTabLabel:D("myConnections.MCPConnectionModal.overview"),functionsTabLabel:D("myConnections.MCPConnectionModal.functions"),noFunctionsLabel:D("myConnections.MCPConnectionModal.noFunctionsAvailable"),noDescriptionLabel:D("myConnections.MCPConnectionModal.noDescriptionProvided"),alwaysAllowLabel:D("myConnections.MCPConnectionModal.alwaysAllow"),tokenInputLabel:D("myConnections.MCPConnectionModal.tokenInput"),functionsList:[],privacyDisclaimer:w,error:M,open:_,setIsOpen:p,additionalFooterContent:i.hasSettings?(0,a.jsx)(m.I,{integration:i}):void 0,demoAnimationSrc:P,canDelete:i.canDelete,canReconnect:i.canReconnect,hasAuthLink:i.hasAuthLink,additionalTextFields:i.isHTTPAuth?S:void 0,updateField:i.isHTTPAuth?(e,t)=>{T(i=>i.map(i=>i.key===e.key?{...i,value:t}:i))}:void 0,onSaveAdditionalFields:i.isHTTPAuth?O:void 0,onClearAdditionalFields:i.isHTTPAuth?()=>{i.isHTTPAuth&&(T(e=>e.map(e=>({...e,value:""}))),R.mutate({integrationId:i.id,configType:"userSecrets",data:{t_auth_token:""},activate:!i.isActive},{onSuccess:()=>{d.oRP.success("Cleared connection token and disconnected"),null==p||p(!1),A.integrations.connectorIntegrations.invalidate()},onError:()=>{d.oRP.error("Failed clear connection token and disconnect")}}))}:void 0,isConnected:i.isConnected,children:t})})}},1672:(e,t,i)=>{i.d(t,{IR:()=>r,PT:()=>n});let a=["gmail","google_calendar","google_drive","box","dropbox","sharepoint","one_drive","one","notion","github","outlook","stripe","atlassian","linear"],n=e=>a.includes(e),s=["google_drive","sharepoint","one_drive","one","dropbox"],r=e=>s.includes(e)},3171:(e,t,i)=>{i.d(t,{$3:()=>_,I6:()=>g,U7:()=>m,W2:()=>h,tO:()=>v,vy:()=>b});var a=i(64784),n=i(8424),s=i(91518),r=i(75429),l=i(94412),o=i(66781),d=i(88318),c=i(28008),u=i(30063);let h=e=>{let{children:t,className:i}=e;return(0,a.jsx)("div",{className:(0,u.cn)("relative overflow-hidden rounded-xl border-1 border-default bg-card shadow-big",i),children:t})},g="max-h-[min(calc(var(--radix-popover-content-available-height)-20px),450px)]",m="max-h-[min(calc(var(--radix-popover-content-available-height)-20px),265px)]",_=e=>{let{children:t,className:i}=e;return(0,a.jsx)("div",{className:(0,u.cn)("flex flex-col gap-2 bg-inherit px-4",i),children:t})},p=()=>{let e=Math.floor(3*Math.random()),t=["w-20","w-30","w-40"];return(0,a.jsx)(n.EAD,{className:(0,u.cn)("h-4",t[e%t.length])})},b=e=>{let{disabled:t,className:i,active:n}=e;return(0,a.jsx)("div",{className:(0,u.cn)("flex items-center justify-center text-center font-medium","group","min-h-10 w-full gap-4 px-2",t&&!n&&"disabled:opacity-60",i,"aria-disabled:bg-state-ghost"),children:(0,a.jsx)(E,{...e})})},v=e=>{let{disabled:t,onClick:i,label:n,tooltip:s,className:l,isLoading:o,active:c}=e;return(0,a.jsxs)(d.m_,{delayDuration:700,children:[(0,a.jsx)(d.k$,{asChild:!0,children:(0,a.jsx)(r.$n,{isLoading:o,size:"lg",variant:"ghost",isDisabled:t,onClick:i,"aria-label":n,className:(0,u.cn)("group","min-h-10 w-full gap-4 px-2",t&&!c&&"disabled:opacity-60",l,"aria-disabled:bg-state-ghost"),children:(0,a.jsx)(E,{...e})})}),s&&(0,a.jsx)(d.ZI,{children:s})]})},E=e=>{let{disabled:t,label:i,subLabel:n,leadIcon:r,isPlaceholder:d,active:h,tailDisplay:g,badgeLabel:m}=e;return(0,a.jsxs)(a.Fragment,{children:[r,(0,a.jsxs)("div",{className:(0,u.cn)("flex w-full min-w-0 shrink flex-col items-start","in-aria-busy:opacity-0"),children:[(0,a.jsx)("div",{className:(0,u.cn)("w-full min-w-0 flex-1 shrink truncate text-left",(0,c.M0)({size:"sm",variant:"muted"})),children:d?(0,a.jsx)(p,{}):i}),n&&!d&&(0,a.jsx)(c.o5,{variant:"hint",size:"xs",className:"w-full min-w-0 flex-1 shrink truncate text-left",children:n})]}),m&&(0,a.jsx)(s.Ex,{size:"sm",colorScheme:"cyan",className:"me-2",children:m}),g&&(0,a.jsx)(a.Fragment,{children:(()=>{switch(g){case"checkbox":return(0,a.jsx)(l.Sc,{isDisabled:t,checked:h,className:(0,u.cn)("pointer-events-none",t&&h&&"opacity-60")});case"radio":return(0,a.jsx)(o.sx,{value:"",isDisabled:t,checked:h,className:(0,u.cn)("pointer-events-none",t&&h&&"opacity-60")});default:return g}})()})]})}},3819:(e,t,i)=>{i.d(t,{l:()=>u,m:()=>c});var a=i(64784),n=i(8380),s=i(30063);let r=(0,n.createContext)(null);var l=i(55796),o=i(6016);function d(e){let{data:t,size:i=320,animation:s=null}=e,r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=r.current;if(!e)return;e.width=i,e.height=i;let a=e.getContext("2d",{alpha:!0});if(!a)return;a.imageSmoothingEnabled=!1,a.clearRect(0,0,e.width,e.height);let n=i/t.length;for(let[e,i]of t.entries())for(let[t,s]of i.entries())s&&(a.fillStyle=s,a.fillRect(Math.round(t*n),Math.round(e*n),Math.round(n),Math.round(n)))},[t,i]),(0,a.jsx)(o.P.canvas,{..."entry"===s?{initial:{opacity:0,y:8},animate:{opacity:1,y:0}}:"hovering"===s?{initial:{y:-1},animate:{y:1},transition:{repeat:1/0,repeatType:"reverse",ease:"easeInOut",duration:.75}}:{},ref:r,width:i,height:i,style:{imageRendering:"pixelated",padding:"10%"}})}function c(e){let{children:t,avatar:i,className:l,...o}=e,d=(0,n.useMemo)(()=>({avatar:i}),[i]);return(0,a.jsx)(r.Provider,{value:d,children:(0,a.jsx)("div",{style:"pixel_avatar"===i.type?{backgroundColor:i.background_color}:void 0,className:(0,s.cn)("brand_avatar"===i.type&&"bg-muted dark:bg-(--neutral-700)",l),...o,children:t})})}function u(e){let t=(0,n.useContext)(r);if(!t)throw Error("AgentAvatar must be used within an AgentAvatarContainer");switch(t.avatar.type){case"pixel_avatar":return(0,a.jsx)(d,{data:t.avatar.pixels,...e});case"brand_avatar":return(0,a.jsx)(l.m,{brandAvatarId:t.avatar.brand_avatar_id,...e});default:return null}}},4970:(e,t,i)=>{i.d(t,{Hy:()=>a,Kz:()=>n,Lk:()=>s});let a=["google_drive","sharepoint","one_drive"],n="https://api-eu.merge.dev",s={google_drive:"https://static-assets.mistral.ai/integrations/Drives.mp4",sharepoint:"https://static-assets.mistral.ai/integrations/Drives.mp4",gmail:"https://static-assets.mistral.ai/integrations/Mail.mp4",google_calendar:"https://static-assets.mistral.ai/integrations/Calendar.mp4"}},8866:(e,t,i)=>{i.d(t,{f:()=>r,n:()=>l});var a=i(8380),n=i(8672),s=i(35111);let r={AUDIO_CANCEL_RECORDING:"audio.cancel_recording",AUDIO_ERROR:"audio.error",AUDIO_SEND_RECORDING:"audio.send_recording",AUDIO_START_RECORDING:"audio.start_recording",CANVA_CLOSE_BUTTON:"canva.close_button",CANVA_COPY_BUTTON:"canva.copy_button",CANVA_EXPORT:"canva.export",CANVA_EXPORT_BUTTON:"canva.export_button",CANVA_NEXT_VERSION:"canva.next_version",CANVA_PREVIEW_PANEL_BUTTON:"canva.preview_panel_button",CANVA_PREVIOUS_VERSION:"canva.previous_version",CANVA_REFERENCE_OPENED:"canva.reference_opened",CANVA_RENDER_PREVIEW:"canva.render_preview",CANVA_SHARE_BUTTON:"canva.share_button",CHANGED_MESSAGE_VERSION:"changed_message_version",CHAT_COMPLETION_ERROR:"chat_completion_error",CMDK_OPEN:"cmdk_open",CMDK_VISIT_PAGE:"cmdk_visit_page",COPIED_MESSAGE:"copied_message",COPIED_MESSAGE_CODE_BLOCK:"copied_message_code_block",COPY_IMAGE_BUTTON:"copy_image_button",COPY_TABLE_SUCESS:"message.copy_table.success",COPY_TABLE_ERROR:"message.copy_table.error",COPY_USER_SELECTION:"message.copy_user_selection",MESSAGE_USER_SELECTION:"message.user_selection",DISMISSED_ANSWER_PREFERENCE_PROMPT:"dismissed_answer_preference_prompt",DISMISSED_ANSWER_REACTION_DETAIL:"dismissed_answer_reaction_detail",DOWNLOAD_IMAGE_BUTTON:"download_image_button",EDITED_PROMPT:"edited_prompt",FEATURE_TOGGLED:"feature_toggled",FOLLOWUP_CLICKED:"followup.clicked",FOLLOWUP_HOVERED:"followup.hovered",INDEXING_CONNECT_WORKFLOW:"indexing.connect_workflow.started",INTEGRATIONS_CONNECT:"integrations.connect",INTEGRATIONS_RECONNECT:"integrations.reconnect",MEMORY_CREATED:"memory.created",MEMORY_DELETED:"memory.deleted",MEMORY_IMPORTED:"memory.imported",MEMORY_OPT_IN:"memory.opt_in",MEMORY_OPT_OUT:"memory.opt_out",MEMORY_SEARCHED:"memory.searched",MEMORY_TOGGLED:"memory.toggled",MEMORY_UPDATED:"memory.updated",MEMORY_UPDATED_IN_CHAT_TOOLTIP:"memory.updated_in_chat_tooltip",MESSAGE_INPUT_DOCUMENT_LIBRARY_SEARCH:"message_input.document_library.search",MESSAGE_INPUT_DOCUMENT_LIBRARY_SELECTION:"message_input.document_library.selection",MESSAGE_INPUT_DOCUMENT_UPLOAD_FROM_LIBRARY:"message_input.document_upload_from_library",MESSAGE_INPUT_FEATURES_DESELECTION:"message_input.features.deselection",MESSAGE_INPUT_FEATURES_SELECTION:"message_input.features.selection",MESSAGE_INPUT_INTEGRATIONS_DESELECTION:"message_input.integrations.deselection",MESSAGE_INPUT_INTEGRATIONS_SELECTION:"message_input.integrations.selection",MESSAGE_INPUT_RICH_INPUT_ERROR:"message_input.rich_input.error",PAGE_VIEW:"page_view",PROJECT_CHAT_OPEN:"project.chat_open",PROJECT_LIBRARY_CREATED:"project.library.created",PROMPT_SUBMITTED:"prompt_submitted",REFERENCE_CLICKED:"reference.clicked",REFERENCE_HOVERED:"reference.hovered",RETRIED_ANSWER:"retried_answer",REWROTE_ANSWER:"rewrote_answer",SEARCH_MODAL_CLOSED:"search_modal_closed",SELECT_PLAN_CTA_CLICKED:"select_plan_cta_clicked",SHARED_CHAT:"shared_chat",STARTING_EDIT_AFTER_ERROR:"starting_edit_after_error",SUGGESTION_PROMPT_SUBMITTED:"suggestion.prompt_submitted",SUGGESTION_INTEGRATION_CONNECTED:"suggestion.integration_connected",UPGRADE_CTA_CLICKED:"upgrade_cta_clicked"},l=()=>{let{mutate:e}=s.api.event.sendEventToDatalake.useMutation(),{mutate:t}=s.api.event.sendMessageEventToDatalake.useMutation(),i=(0,a.useCallback)((t,i)=>{e({name:t,properties:null!=i?i:{}})},[e]),r=(0,a.useCallback)((e,a)=>{let{chat_id:s,message_id:r,message_version:l,...o}=a;(0,n.u)(s)||(0,n.u)(r)||(0,n.u)(l)?i(e,o):t({name:e,chatId:s,messageId:r,messageVersion:l,properties:o})},[i,t]);return{track:i,trackMessageEvent:r}}},19494:(e,t,i)=>{i.d(t,{IntegrationsProvider:()=>v,mr:()=>p,xn:()=>b});var a=i(64784),n=i(8380),s=i(14455),r=i(81457),l=i(42573),o=i(32750),d=i(18544),c=i(64027),u=i(35111),h=i(6974),g=i(8866),m=i(35287);let _=n.createContext(null);function p(){let e=(0,n.useContext)(_);if(!e)throw Error("useIntegrationsContext must be used within a IntegrationsProvider");return e}let b=e=>{let{selectedFeatures:t}=p();return t.includes(e)},v=e=>{let{session:t,...i}=e,{data:n,isLoading:s}=u.api.integrations.connectorIntegrations.useQuery(void 0,{enabled:!!t});return(0,a.jsx)(E,{...i,session:t,integrations:{data:n&&t?(0,o.pL)(n):[],isLoading:s}})},E=e=>{let{features:t,integrations:{data:i,isLoading:o},children:p,session:b,initialFeatures:v,initialIntegrations:E,saveSelection:f,onChange:x,chatId:C}=e,I=m.E.use.isLoaded(),[y,N]=(0,n.useState)(!1),S=(0,n.useMemo)(()=>(0,s.E)(t,d.qY),[t]),T=(0,n.useMemo)(()=>b?h._.NEXT_PUBLIC_DEFAULT_SELECTED_FEATURES:h._.NEXT_PUBLIC_DEFAULT_SELECTED_FEATURES.filter(e=>h._.NEXT_PUBLIC_ANONYMOUS_ALLOWED_FEATURES.includes(e)),[b]),[A,R]=(0,c.A)(()=>(0,s.E)(S,null!=v?v:T),[v]),O=(0,n.useMemo)(()=>new Map(i.map(e=>[e.id,e])),[i]),L=(0,n.useMemo)(()=>Array.from(O.keys()),[O]),D=(0,n.useMemo)(()=>i.filter(e=>e.computedIntegrationInfo.isReady),[i]),w=m.E.use.selectedIntegrations(),[M,j]=(0,c.A)(()=>(0,s.E)(D.map(e=>e.id),null!=E?E:I?w:[]),[I,D,w,E]),{track:k}=(0,g.n)(),P=(0,l.DK)(e=>{(0,r.i)(e,A).forEach(e=>k(g.f.FEATURE_TOGGLED,{feature:e,enabled:!0})),(0,r.i)(A,e).forEach(e=>k(g.f.FEATURE_TOGGLED,{feature:e,enabled:!1})),R(e),null==x||x(e,M)}),U=(()=>{let e=u.api.useUtils();return u.api.chat.updateIntegrations.useMutation({onMutate:t=>{var i;let{id:a,integrations:n}=t;if(!a)return;let s=null==(i=e.chat.byId.getData({id:a}))?void 0:i.integrations;return e.chat.byId.setData({id:a},e=>{if(e)return{...e,integrations:n}}),{previousIntegrations:s}},onError:(t,i,a)=>{let{id:n}=i;e.chat.byId.setData({id:n},t=>{var i;return t&&a?{...t,integrations:null!=(i=a.previousIntegrations)?i:[]}:void e.chat.byId.invalidate({id:n})})}})})(),F=m.E.use.setSelectedIntegrations(),G=(0,l.DK)(e=>{f&&(F(e),C&&U.mutate({id:C,integrations:e})),j(e),null==x||x(A,e)}),H=(0,n.useMemo)(()=>({features:t,isLoading:!I||o,selectedFeatures:A,setSelectedFeatures:P,selectedIntegrations:M.filter(e=>L.includes(e)),setSelectedIntegrations:G,allowedFeatures:S,availableIntegrationIds:L,availableIntegrationData:i,isDisabledFeaturesSelection:y,setIsDisabledFeaturesSelection:N}),[t,I,o,A,P,M,G,S,L,i,y,N]);return(0,a.jsx)(_,{value:H,children:p})}},21413:(e,t,i)=>{i.d(t,{DocumentLibraryProvider:()=>m,TY:()=>h});var a=i(64784),n=i(8380),s=i(42573),r=i(64027),l=i(6974),o=i(35287),d=i(35111);let c={documentLibraryAvailable:!1,availableLibraries:[],activeLibrarySelection:[],availableLibrariesLoading:!0,setSelectedLibrary:()=>{},toggleLibrarySelection:()=>{},withDocumentPayload:void 0},u=(0,n.createContext)(null),h=()=>{let e=(0,n.useContext)(u);if(!e)throw Error("useDocumentLibraryContext must be used within a DocumentLibraryProvider");return e},g=e=>{var t,i,l,o;let{children:d,session:h,initialSelection:g,withDocumentPayload:m,libraries:_,defaultValues:p,onLibrarySelectionChange:b}=e,[v,E]=(0,r.A)(null!=g?g:(null==p?void 0:p.isLoading)?[]:null!=(o=null==p?void 0:p.data)?o:[],[g,null==p?void 0:p.isLoading]),f=(0,s.DK)(e=>{null==b||b(e),E(e)}),x=(0,n.useCallback)(e=>{var t,i;let a=null==(i=_.data)||null==(t=i.data.find(t=>t.id===e))?void 0:t.id;E(t=>{let i=t.find(t=>t===e);if(i){let e=t.filter(e=>e!==i);return null==b||b(e),e}if(a){let e=[...t,a];return null==b||b(e),e}return t})},[null==(t=_.data)?void 0:t.data,b,E]),C=(0,n.useMemo)(()=>v.filter(e=>{var t;return null==(t=_.data)?void 0:t.data.some(t=>t.id===e)}),[null==(i=_.data)?void 0:i.data,v]),I=(0,n.useMemo)(()=>{var e,t;let i=null!=(t=null==(e=_.data)?void 0:e.data)?t:[];return h?{documentLibraryAvailable:!0,availableLibraries:i,activeLibrarySelection:C,availableLibrariesLoading:_.isLoading,setSelectedLibrary:f,toggleLibrarySelection:x,withDocumentPayload:m}:c},[null==(l=_.data)?void 0:l.data,_.isLoading,h,C,f,x,m]);return(0,a.jsx)(u,{value:I,children:d})},m=e=>{let{session:t,saveSelection:i,types:n,...s}=e,{data:r,isLoading:c}=d.api.library.all.useQuery({types:n},{enabled:!!t&&!l._.NEXT_PUBLIC_DISABLE_DOCUMENT_LIBRARY}),u=o.E.use.isLoaded(),h=o.E.use.newChatLibraries(),m=o.E.use.setNewChatLibraries();return(0,a.jsx)(g,{...s,session:t,onLibrarySelectionChange:i?m:void 0,defaultValues:{data:h,isLoading:!u},libraries:{data:r,isLoading:c}})}},24783:(e,t,i)=>{i.r(t),i.d(t,{ButtonLink:()=>_});var a=i(64784),n=i(5936),s=i(6016),r=i(15548),l=i(63929),o=i.n(l),d=i(8380),c=i(75429),u=i(88318),h=i(30063);let g=(0,d.createContext)({isPending:!1,setIsPending:()=>{}});function m(e){let{children:t}=e,[i,n]=(0,d.useState)(!1),s=(0,d.useMemo)(()=>({isPending:i,setIsPending:n}),[i,n]);return(0,a.jsx)(g.Provider,{value:s,children:t})}function _(e){var t;let{isDisabled:i,children:n,variant:s,shape:r,size:l,mode:_,className:b,icon:v,...E}=e,f=(0,d.useContext)(c.ZD),x=(0,h.eX)(n,{tailIcon:c.qF,leadIcon:c.IM,tooltip:c.GM}),C=null!=(t=null==f?void 0:f.styles)?t:(0,c.ru)({shape:r,size:l,mode:_,variant:s});return(0,a.jsx)(m,{children:(0,a.jsx)(g.Consumer,{children:e=>{let{isPending:t}=e;return(0,a.jsx)(c.kf.Provider,{value:{styles:C},children:x.tooltip?(0,a.jsxs)(u.m_,{children:[(0,a.jsx)(u.k$,{asChild:!0,children:(0,a.jsx)(o(),{"aria-disabled":i,"aria-busy":t,className:(0,h.cn)(C.base({className:b})),onClick:e=>{i&&e.preventDefault()},...E,children:(0,a.jsx)(p,{mode:_,icon:v,styles:C,slots:x})})}),x.tooltip]}):(0,a.jsx)(o(),{"aria-disabled":i,"aria-busy":t,className:(0,h.cn)(C.base({className:b})),onClick:e=>{i&&e.preventDefault()},...E,children:(0,a.jsx)(p,{mode:_,icon:v,styles:C,slots:x})})})}})})}function p(e){let{mode:t,icon:i,styles:o,slots:c}=e,u=(0,l.useLinkStatus)(),{isPending:h,setIsPending:m}=(0,d.useContext)(g);return(0,d.useEffect)(()=>{m(u.pending)},[u.pending,m]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.N,{children:h&&(0,a.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.15}},className:o.spinner(),children:(0,a.jsx)(r.A,{className:"size-4 animate-spin"})})}),"icon-only"===t?(0,d.createElement)(i,{className:o.onlyIcon()}):(0,a.jsxs)(a.Fragment,{children:[c.leadIcon,c.main,c.tailIcon]})]})}},25576:(e,t,i)=>{i.d(t,{A:()=>s});var a=i(42573),n=i(35287);let s=()=>{let e=n.E.use.isLoaded(),t=n.E.use.selectedIntegrations(),i=n.E.use.setSelectedIntegrations(),s=(0,a.DK)(a=>{e&&i(t.filter(e=>e!==a))}),r=(0,a.DK)(a=>{!e||t.includes(a)||i([...t,a])});return{isLoading:!e,removeDefaultIntegration:s,addDefaultIntegration:r}}},32750:(e,t,i)=>{i.d(t,{Es:()=>s,FM:()=>r,cC:()=>n,pL:()=>l});var a=i(1672);function n(e,t){if((0,a.IR)(e))return[t("integrations.system_prompt_examples.google_drive.0"),t("integrations.system_prompt_examples.google_drive.1"),t("integrations.system_prompt_examples.google_drive.2")];switch(e){case"gmail":return[t("integrations.system_prompt_examples.gmail.0"),t("integrations.system_prompt_examples.gmail.1"),t("integrations.system_prompt_examples.gmail.2")];case"google_calendar":return[t("integrations.system_prompt_examples.google_calendar.0"),t("integrations.system_prompt_examples.google_calendar.1"),t("integrations.system_prompt_examples.google_calendar.2")];default:return[]}}function s(e,t){if((0,a.IR)(e))return t("integrations.description.google_drive");switch(e){case"gmail":return t("integrations.description.gmail");case"google_calendar":return t("integrations.description.google_calendar");default:return}}function r(e){return!!(e.isHTTPAuth&&e.customUserSecretsSchema&&"required"in e.customUserSecretsSchema&&Array.isArray(e.customUserSecretsSchema.required)&&e.customUserSecretsSchema.required.includes("t_auth_token"))}let l=e=>e.filter(e=>e.computedIntegrationInfo.isOrgUsable)},35287:(e,t,i)=>{i.d(t,{E:()=>c});var a=i(2007),n=i(73415),s=i(61639);let r=["dismiss-key-example"],l={"dismiss-key-example":null};var o=i(94663);let d=(0,n.vt)()((0,s.Zr)((e,t)=>({isLoaded:!1,newChatFeatures:null,selectedIntegrations:[],newChatLibraries:null,draftMessageByChatId:{},dismissedItems:r.reduce((e,t)=>(e[t]={dismissed:!1,dismissDuration:l[t],dismissedAt:null},e),{}),projectsConfiguration:{},setIsLoaded:t=>e({isLoaded:t}),setSelectedIntegrations:t=>e({selectedIntegrations:t}),setNewChatLibraries:t=>e({newChatLibraries:t}),setDraftMessageByChatId:(t,i)=>{i&&e(e=>({draftMessageByChatId:{...e.draftMessageByChatId,[t]:{...e.draftMessageByChatId[t],...i.serializedMessage?{serializedMessage:i.serializedMessage}:{}}}}))},unsetDraftMessageByChatId(t){e(e=>{let i={...e.draftMessageByChatId};return delete i[t],{draftMessageByChatId:i}})},setDismissedItem:(t,i)=>e(e=>({dismissedItems:{...e.dismissedItems,[t]:i}})),setProjectConfiguration:(t,i)=>{e(e=>({projectsConfiguration:(0,a.h)(e.projectsConfiguration,{[t]:i})}))}}),{name:"persistent-store"})),c=(0,o.L)(d)},38256:(e,t,i)=>{i.d(t,{SessionProvider:()=>r,d:()=>o,w:()=>l});var a=i(64784),n=i(8380);let s=(0,n.createContext)(void 0),r=e=>{let{children:t,session:i}=e,[r,l]=(0,n.useState)(i);(0,n.useEffect)(()=>{l(i)},[i]);let o=(0,n.useMemo)(()=>({session:r,setSession:e=>r?l({...r,...e}):null}),[r,l]);return(0,a.jsx)(s.Provider,{value:o,children:t})},l=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useSession must be used within a SessionProvider");let t=e.session;return null===t?null:{...e,session:t}},o=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useSession must be used within a SessionProvider");let t=e.session;if(null===t)throw Error("useAuthenticatedSession must be used within a logged in only component");return{...e,session:t}}},38534:(e,t,i)=>{i.d(t,{I:()=>S});var a=i(64784),n=i(57595),s=i(76384),r=i(19664),l=i(93706),o=i(37215),d=i(63502),c=i(4815),u=i(60527),h=i(6807),g=i(8424),m=i(75429),_=i(44892),p=i(35111),b=i(94412),v=i(801);let E=e=>{let{children:t,id:i,label:n}=e;return(0,a.jsxs)("div",{className:"mb-4",children:[n&&(0,a.jsx)("label",{htmlFor:i,className:"mb-2 block text-sm font-medium",children:n}),t]})},f=e=>{let{id:t,value:i,required:n,disabled:s,readonly:r,label:l,onChange:o,placeholder:d,rawErrors:c}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.pd,{id:t,value:null!=i?i:"",onChange:e=>o(e.target.value),placeholder:d||l,isDisabled:s||r,required:n}),c&&c.length>0&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:c[0]})]})},x=e=>{let{id:t,value:i,required:n,disabled:s,readonly:r,label:l,onChange:o,placeholder:d,rawErrors:c}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.pd,{id:t,value:null!=i?i:"",onChange:e=>o(e.target.value),placeholder:d||l,isDisabled:s||r,required:n,type:"password"}),c&&c.length>0&&(0,a.jsx)("p",{className:"text-red-500 mt-1 text-sm",children:c[0]})]})},C=e=>{let{id:t,value:i,label:n,onChange:s,disabled:r,readonly:l}=e;return(0,a.jsx)("div",{className:"mb-6 flex items-center space-x-2",children:(0,a.jsxs)(b.VT,{children:[(0,a.jsx)(b.Sc,{id:t,checked:i,onCheckedChange:e=>s(!!e),isDisabled:r||l}),(0,a.jsx)(b.Sb,{children:n})]})})},I=e=>{if(!e)return e;let t={...e,properties:(0,o.c)(e.properties,["t_auth_token"]),required:(0,d.p)(e.required,e=>"t_auth_token"!==e)};return(0,c.I)(t.properties)?null:t},y=(e,t)=>e?{...e,title:t}:null,N={"ui:submitButtonOptions":{norender:!0}},S=e=>{let{integration:t}=e,i=(0,l.c3)("Chat.integrations.settings"),o=p.api.integrations.updateIntegrationData.useMutation({onSuccess:()=>g.oRP.success("Updated integration data"),onError:()=>g.oRP.error("Failed to update integration data")}),d=async(e,t,i,a)=>{let n=(0,u.f)(i,h.h);o.mutate({integrationId:e,data:n,configType:a,activate:t})},c=()=>null,b=(e,r)=>(0,a.jsxs)("div",{className:"mb-4 space-y-4",children:[(0,a.jsx)(_.cG,{}),(0,a.jsx)(n.Ay,{schema:e,uiSchema:N,validator:s.Ay,templates:{FieldTemplate:E,TitleFieldTemplate:c},widgets:{TextWidget:f,CheckboxWidget:C,PasswordWidget:x},onSubmit:e=>d(t.id,!t.isActive,e.formData,r),children:(0,a.jsx)("div",{className:"mt-4 flex justify-end",children:(0,a.jsx)(m.$n,{type:"submit",variant:"secondary",children:i("save",{keyTitle:e.title})})})})]});return(0,a.jsxs)(g.Nt8,{className:"w-full",children:[(0,a.jsx)(g.R6$,{asChild:!0,children:(0,a.jsxs)(m.$n,{variant:"primary",className:"w-full justify-center",children:[i("settings"),(0,a.jsx)(m.IM,{icon:r.A})]})}),(0,a.jsx)(g.KeB,{className:"w-full flex-col space-y-10 p-4",children:(0,a.jsxs)(g.FKN,{className:"h-[200px] w-full pe-4",children:[t.userConfigSchema&&b(y(t.userConfigSchema,i("userConfig")),"userConfig"),I(t.customUserSecretsSchema)&&b(y(I(t.customUserSecretsSchema),i("userSecrets")),"userSecrets"),t.customerConfigSchema&&b(y(t.customerConfigSchema,i("customerConfig")),"customerConfig"),t.customerSecretsSchema&&b(y(t.customerSecretsSchema,i("customerSecrets")),"customerSecrets")]})})]})}},52907:(e,t,i)=>{i.d(t,{v:()=>a.ButtonLink});var a=i(24783)},55796:(e,t,i)=>{i.d(t,{m:()=>o});var a=i(64784),n=i(6016),s=i(79497),r=i(30063);let l={1:{src:"/_next/static/media/1.9317b3e3.svg",height:86,width:86,blurWidth:0,blurHeight:0},2:{src:"/_next/static/media/2.842f3bcc.svg",height:86,width:86,blurWidth:0,blurHeight:0},3:{src:"/_next/static/media/3.4325f66c.svg",height:86,width:86,blurWidth:0,blurHeight:0},4:{src:"/_next/static/media/4.5b8e2103.svg",height:86,width:86,blurWidth:0,blurHeight:0},5:{src:"/_next/static/media/5.a3f2176b.svg",height:86,width:86,blurWidth:0,blurHeight:0},6:{src:"/_next/static/media/6.86700681.svg",height:86,width:86,blurWidth:0,blurHeight:0},7:{src:"/_next/static/media/7.5878fc8b.svg",height:86,width:86,blurWidth:0,blurHeight:0},8:{src:"/_next/static/media/8.efa65138.svg",height:86,width:86,blurWidth:0,blurHeight:0},9:{src:"/_next/static/media/9.8e145799.svg",height:86,width:86,blurWidth:0,blurHeight:0},10:{src:"/_next/static/media/10.99e5538b.svg",height:86,width:86,blurWidth:0,blurHeight:0},11:{src:"/_next/static/media/11.8af91e78.svg",height:86,width:86,blurWidth:0,blurHeight:0},12:{src:"/_next/static/media/12.c8ca6605.svg",height:86,width:86,blurWidth:0,blurHeight:0},13:{src:"/_next/static/media/13.542eeb77.svg",height:86,width:86,blurWidth:0,blurHeight:0},14:{src:"/_next/static/media/14.0a1aaa4e.svg",height:86,width:86,blurWidth:0,blurHeight:0},15:{src:"/_next/static/media/15.6700a365.svg",height:86,width:86,blurWidth:0,blurHeight:0},16:{src:"/_next/static/media/16.bc73ff58.svg",height:86,width:86,blurWidth:0,blurHeight:0},17:{src:"/_next/static/media/17.8921679c.svg",height:86,width:86,blurWidth:0,blurHeight:0},18:{src:"/_next/static/media/18.b3f5d58f.svg",height:86,width:86,blurWidth:0,blurHeight:0},19:{src:"/_next/static/media/19.eba09578.svg",height:86,width:86,blurWidth:0,blurHeight:0},20:{src:"/_next/static/media/20.8eaaf57b.svg",height:86,width:86,blurWidth:0,blurHeight:0},21:{src:"/_next/static/media/21.ce3efc6c.svg",height:86,width:86,blurWidth:0,blurHeight:0}};function o(e){let{size:t,animation:i,className:o,brandAvatarId:d}=e;return(0,a.jsx)(n.P.div,{..."entry"===i?{initial:{opacity:0,y:8},animate:{opacity:1,y:0}}:"hovering"===i?{initial:{y:-1},animate:{y:1},transition:{repeat:1/0,repeatType:"reverse",ease:"easeInOut",duration:.75}}:{},children:(0,a.jsx)(s.default,{width:t,height:t,className:(0,r.cn)(o,"scale-[1.8] object-cover object-center"),src:d in l?l[d]:l[1],alt:"Brand Avatar ".concat(d),style:{imageRendering:"pixelated"}})})}},64027:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(8380);let n=(e,t)=>{let[i,n]=s(e),c=a.useRef(l());a.useMemo(()=>{c.current=r(d(e))},t);let u=a.useCallback(e=>{n(t=>{let i=c.current?c.current.value:t;return c.current=l(),o(e,i)})},[n]);return[c.current?c.current.value:i,u]},s=e=>{let[{value:t},i]=a.useState(()=>({value:d(e)}));return[t,a.useCallback(e=>{i(t=>{let{value:i}=t;return{value:o(e,i)}})},[])]},r=e=>({value:e}),l=()=>null,o=(e,t)=>"function"==typeof e?e(t):e,d=e=>"function"==typeof e?e():e},66781:(e,t,i)=>{i.d(t,{sx:()=>m,LI:()=>p,Sn:()=>v,z6:()=>_,Wb:()=>b});var a=i(64784),n=i(76917),s=i(8380),r=i(1613),l=i(30240),o=i(83834);let d=(0,s.createContext)(null),c=(0,s.createContext)(null);var u=i(47795),h=i(99821);let g=(0,u.tv)({extend:h.i,slots:{group:"space-y-2",hiddenInput:"",container:"[&>:first-child]:translate-y-[2px]",label:"",description:"",toggleable:"inline-flex has-focus-visible:ring-3 has-focus-visible:ring-offset-1 has-focus-visible:ring-default outline-hidden overflow-visible rounded-full",radio:["relative flex items-center justify-center size-4 border border-transparent bg-default inline-flex rounded-full transition-all cursor-pointer","group-has-aria-checked:bg-checkbox-active group-has-aria-checked:hover:bg-checkbox-active-hover","group-has-aria-[checked=false]:border-default group-has-aria-[checked=false]:hover:border-strong","group-has-aria-[checked=false]:group-hover/container:border-strong!","group-has-aria-disabled:bg-checkbox-disabled group-has-aria-disabled:border-default"],innerCircle:["absolute inset-0 bg-default rounded-full","group-has-aria-checked:scale-50 transition-transform","group-has-[input[type='radio']:not(:checked):disabled]:bg-checkbox-disabled","group-has-[input[type='radio']:checked:disabled]:bg-(--icon-default-disabled)"],phantomCircle:["absolute inset-0 group-has-aria-checked:invisible! scale-0 group-hover:scale-50 transition-transform rounded-full bg-muted"]},compoundSlots:[{slots:["label","description"],className:"block cursor-pointer group-has-aria-disabled/container:cursor-not-allowed"}],variants:{variant:{default:{},"with-shadow":{radio:"inset-shadow-checkbox-active"}}},compoundVariants:[],defaultVariants:{position:"left",variant:"default"}}),m=e=>{var t,i,n,r,o;let{className:u,isDisabled:h,onChange:m,onCheckedChange:_,variant:p,value:b,...v}=e,E=(0,s.useId)(),f=(0,s.useContext)(l._),x=(0,s.useContext)(d),C=(0,s.useContext)(c),I=(null==C?void 0:C.isDisabled)||h,[y,N]=(0,s.useState)(C?C.value===b:!!(null!=(i=null!=(t=v.checked)?t:v.defaultChecked)&&i)),S=C?C.value===b:null!=(n=v.checked)?n:y,T=x?x.styles:C?C.styles:g({variant:p}),A=null!=(o=null!=(r=null==x?void 0:x.id)?r:v.id)?o:E;return(0,a.jsxs)("div",{className:T.toggleable({className:u}),children:[(0,a.jsx)("input",{type:"radio",className:T.hiddenInput(),role:"radio",checked:S,"data-state":S?"checked":"unchecked","aria-checked":S,"aria-invalid":!!(null==f?void 0:f.isInvalid),"aria-disabled":I,disabled:I,id:A,...v,onClick:()=>{let e=!S;N(e),null==_||_(e),null==C||C.onValueChange(b)},onChange:e=>{var t;null==C||null==(t=C.onChange)||t.call(C,e),null==m||m(e)}}),(0,a.jsxs)("label",{htmlFor:A,className:T.radio(),children:[(0,a.jsx)("span",{className:T.innerCircle()}),(0,a.jsx)("span",{className:T.phantomCircle()})]})]})};function _(e){let{children:t,className:i,variant:n,value:r,onValueChange:l,onChange:o,isDisabled:d,ref:u,...h}=e,m=(0,s.useMemo)(()=>({styles:g({variant:n}),value:r,onValueChange:l,onChange:o,isDisabled:d}),[n,r,l,o,d]);return(0,a.jsx)(c.Provider,{value:m,children:(0,a.jsx)("div",{role:"radiogroup",className:m.styles.group({className:i}),...h,children:t})})}function p(e){let{className:t,children:i,position:l,...o}=e,u=(0,s.useContext)(c),h=(0,s.useId)(),_=(0,r.createSlots)(i,{radio:m,label:b,description:v}),p=(0,s.useMemo)(()=>{var e;return{styles:null!=(e=null==u?void 0:u.styles)?e:g(),id:h}},[null==u?void 0:u.styles,h]);return(0,a.jsx)(d.Provider,{value:p,children:(0,a.jsxs)("div",{className:p.styles.container({className:t,position:l}),...o,children:[_.radio,(0,a.jsxs)(n.J,{htmlFor:h,children:[_.label,_.description]})]})})}function b(e){let{className:t,children:i}=e,n=(0,s.useContext)(d);if(!n)throw Error("RadioLabel must be used within a RadioContainer");return(0,a.jsx)(o.TypographySpan,{size:"sm",weight:"medium",className:n.styles.label({className:t}),children:i})}function v(e){let{className:t,children:i}=e,n=(0,s.useContext)(d);if(!n)throw Error("RadioDescription must be used within a RadioContainer");return(0,a.jsx)(o.TypographySpan,{size:"sm",variant:"subtle",className:n.styles.description({className:t}),children:i})}m.displayName="Radio",p.displayName="RadioContainer",b.displayName="RadioLabel",v.displayName="RadioDescription"},93339:(e,t,i)=>{i.d(t,{Sr:()=>E,VQ:()=>x,hN:()=>C});var a=i(64784),n=i(81118),s=i(93706),r=i(64371),l=i(8380),o=i(30817),d=i(1672),c=i(8424),u=i(28008),h=i(30063),g=i(3171),m=i(21413),_=i(8866),p=i(35111),b=i(19494),v=i(478);let E=(e,t)=>{var i;return null!=(i=e[t])?i:e.en},f=()=>{let e=(0,s.c3)("Chat.integrations");return(0,a.jsxs)("div",{className:"flex justify-end text-(--bg-basic-blue-strong)",children:[(0,a.jsx)(n.A,{strokeWidth:2,className:(0,h.cn)("size-4 text-(--bg-basic-blue-strong) group-hover:hidden")}),(0,a.jsx)("div",{className:(0,h.cn)("hidden group-hover:block",(0,u.M0)({size:"xs"})),children:e("connect")})]})},x=e=>{var t;let{integration:i,disabled:n,disableReason:c,agent:u}=e,{track:h}=(0,_.n)(),{selectedIntegrations:g,setSelectedIntegrations:E,isLoading:f,availableIntegrationData:x}=(0,b.mr)(),{activeLibrarySelection:C}=(0,m.TY)(),y=(0,s.c3)("Chat"),N=p.api.useUtils(),S=(0,l.useCallback)(e=>{!f&&(e?(E(Array.from(new Set([...g,i.id]))),h(_.f.MESSAGE_INPUT_INTEGRATIONS_SELECTION,{integration_id:i.id,integration_name:i.name}),i.isMCPIntegration&&N.integrations.tools.prefetch({integrationId:i.id})):(E(g.filter(e=>e!==i.id)),h(_.f.MESSAGE_INPUT_INTEGRATIONS_DESELECTION,{integration_id:i.id,integration_name:i.name})))},[i.id,i.name,i.isMCPIntegration,f,g,E,h,N.integrations.tools]),T=g.includes(i.id),A=C.length>0&&(0,d.IR)(i.dbName),R=x.filter(e=>(0,d.IR)(e.name)&&g.includes(e.id)&&e.id!==i.id),O=(0,r.Ym)(),L=(0,o.ad)(O)?O:o.rc.en,D=R.map(e=>{var t,i,a;return null!=(a=null==(i=e.locale)||null==(t=i.name)?void 0:t[L])?a:e.name}),w=g.length>0&&(0,d.IR)(i.dbName)&&R.length>0,M=null==u||null==(t=u.integrations)?void 0:t.includes(i.id),j=!i.isActive||f||!!n||A||w||!!M,[k,P]=(0,l.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{integration:i,onClick:()=>{if(!i.isReady||!i.isConnected)return void P(!0);i.isActive&&S(!g.includes(i.id))},selected:T,disabled:j,tooltip:"connector_tools_rate_limit"===c?y("integrations.connector_tools_rate_limit"):i.isActive?!j||i.isReady&&i.isConnected?A?y("integrations.incompatible_libraries"):w?"".concat(y("integrations.incompatible_integration_active")," ").concat(D.join(", ")):void 0:y("integrations.configuration_needed"):y("integrations.not_enabled_by_admin")}),(0,a.jsx)(v.f,{integration:i,open:k,setIsOpen:P})]})},C=e=>{let{integration:t,className:i}=e,{selectedIntegrations:n,availableIntegrationData:s}=(0,b.mr)(),{activeLibrarySelection:l}=(0,m.TY)(),o=n.includes(t.id),u=s.filter(e=>(0,d.IR)(e.name)&&n.includes(e.id)&&e.id!==t.id),h=l.length>0&&(0,d.IR)(t.dbName),_=n.length>0&&(0,d.IR)(t.dbName)&&u.length>0,p=(0,r.Ym)(),v=h||_||!t.isActive;return(0,a.jsx)(g.vy,{active:o,disabled:v,leadIcon:(0,a.jsx)(c.Ybv,{src:t.iconUrl,name:E(t.name,p),size:18}),label:E(t.name,p),className:i})},I=e=>{let{integration:t,hideSelectionStatus:i,disabled:n,selected:s,tooltip:o,onClick:d}=e,u=(0,r.Ym)(),[h,m]=(0,l.useState)(!1),_=n||!t.isActive;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.tO,{tailDisplay:!i&&(t.isReady&&t.isConnected?"checkbox":(0,a.jsx)(f,{})),active:s,disabled:_,tooltip:o,leadIcon:t.iconUrl?(0,a.jsx)(c.Ybv,{src:t.iconUrl,name:E(t.name,u),size:18}):(0,a.jsx)(c.HHk,{className:"size-5"}),label:E(t.name,u),onClick:d,className:"min-w-0"}),(0,a.jsx)(v.f,{integration:t,open:h,setIsOpen:m})]})}},94663:(e,t,i)=>{i.d(t,{L:()=>a});let a=e=>{for(let t of(e.use={},Object.keys(e.getState())))e.use[t]=()=>e(e=>e[t]);return e}}}]);